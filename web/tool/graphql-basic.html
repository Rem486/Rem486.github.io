<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>graphql - 入门 | 从零开始的故事</title>
  <meta name="description" content="">
  <meta name="keywords" content="前端博客,前端知识,前端备忘录,程序员笔记,css,html,javascript,git,linux">
  <meta name="baidu-site-verification" content="utzmmiwMvm"/>
  <link rel="icon" href="/img/logo.ico">
  <meta name="description" content="graphql基础知识">
    <meta property="article:published_time" content="2021-01-27T00:00:00.000Z">
    <meta property="article:modified_time" content="2021-03-12T06:22:37.000Z">
    <meta property="og:site_name" content="从零开始的故事">
    <meta property="og:title" content="graphql - 入门">
    <meta property="og:description" content="graphql基础知识">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/web/tool/graphql-basic.html">
    <meta name="twitter:title" content="graphql - 入门">
    <meta name="twitter:description" content="graphql基础知识">
    <meta name="twitter:url" content="/web/tool/graphql-basic.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="graphql, api, http">
    <meta property="article:tag" content="graphql">
  <link rel="preload" href="/assets/css/0.styles.28933c33.css" as="style"><link rel="preload" href="/assets/js/app.457c0c80.js" as="script"><link rel="preload" href="/assets/js/2.e856cdfd.js" as="script"><link rel="preload" href="/assets/js/67.77571cad.js" as="script"><link rel="prefetch" href="/assets/js/10.982095af.js"><link rel="prefetch" href="/assets/js/11.55740141.js"><link rel="prefetch" href="/assets/js/12.6970b259.js"><link rel="prefetch" href="/assets/js/13.00c0e8f5.js"><link rel="prefetch" href="/assets/js/14.3507c3fb.js"><link rel="prefetch" href="/assets/js/15.bbb64950.js"><link rel="prefetch" href="/assets/js/16.34b655d7.js"><link rel="prefetch" href="/assets/js/17.fdff2990.js"><link rel="prefetch" href="/assets/js/18.5ceefe37.js"><link rel="prefetch" href="/assets/js/19.fdbbb80d.js"><link rel="prefetch" href="/assets/js/20.a0262c62.js"><link rel="prefetch" href="/assets/js/21.aa35086c.js"><link rel="prefetch" href="/assets/js/22.6abffbd5.js"><link rel="prefetch" href="/assets/js/23.a8e21751.js"><link rel="prefetch" href="/assets/js/24.8518c2ad.js"><link rel="prefetch" href="/assets/js/25.3f9692af.js"><link rel="prefetch" href="/assets/js/26.e7a2596c.js"><link rel="prefetch" href="/assets/js/27.ef1ebbd3.js"><link rel="prefetch" href="/assets/js/28.06a46298.js"><link rel="prefetch" href="/assets/js/29.797e33f2.js"><link rel="prefetch" href="/assets/js/3.740c655a.js"><link rel="prefetch" href="/assets/js/30.f1f48ee5.js"><link rel="prefetch" href="/assets/js/31.efe44945.js"><link rel="prefetch" href="/assets/js/32.7fd16e1b.js"><link rel="prefetch" href="/assets/js/33.a0492fcf.js"><link rel="prefetch" href="/assets/js/34.f2caf3fb.js"><link rel="prefetch" href="/assets/js/35.5a268b39.js"><link rel="prefetch" href="/assets/js/36.43cf0325.js"><link rel="prefetch" href="/assets/js/37.7cdc791d.js"><link rel="prefetch" href="/assets/js/38.24700d5c.js"><link rel="prefetch" href="/assets/js/39.c3b9af07.js"><link rel="prefetch" href="/assets/js/4.eb8d04ba.js"><link rel="prefetch" href="/assets/js/40.e69f0441.js"><link rel="prefetch" href="/assets/js/41.0f573f12.js"><link rel="prefetch" href="/assets/js/42.13e41432.js"><link rel="prefetch" href="/assets/js/43.386012a3.js"><link rel="prefetch" href="/assets/js/44.10554617.js"><link rel="prefetch" href="/assets/js/45.8f139fc7.js"><link rel="prefetch" href="/assets/js/46.c36ec3ec.js"><link rel="prefetch" href="/assets/js/47.0d530596.js"><link rel="prefetch" href="/assets/js/48.62f9c229.js"><link rel="prefetch" href="/assets/js/49.41571257.js"><link rel="prefetch" href="/assets/js/5.9e7a8b8f.js"><link rel="prefetch" href="/assets/js/50.04f814b0.js"><link rel="prefetch" href="/assets/js/51.601b124c.js"><link rel="prefetch" href="/assets/js/52.14f453f4.js"><link rel="prefetch" href="/assets/js/53.9a633803.js"><link rel="prefetch" href="/assets/js/54.23c60e96.js"><link rel="prefetch" href="/assets/js/55.62680e74.js"><link rel="prefetch" href="/assets/js/56.e2360a4a.js"><link rel="prefetch" href="/assets/js/57.a5a33d50.js"><link rel="prefetch" href="/assets/js/58.43778ee2.js"><link rel="prefetch" href="/assets/js/59.1096e9ba.js"><link rel="prefetch" href="/assets/js/6.54ccaa2a.js"><link rel="prefetch" href="/assets/js/60.5edbf4fa.js"><link rel="prefetch" href="/assets/js/61.633a2c53.js"><link rel="prefetch" href="/assets/js/62.c4dc6ac1.js"><link rel="prefetch" href="/assets/js/63.bb8c8036.js"><link rel="prefetch" href="/assets/js/64.b31ddd2b.js"><link rel="prefetch" href="/assets/js/65.880d858a.js"><link rel="prefetch" href="/assets/js/66.083c45cc.js"><link rel="prefetch" href="/assets/js/68.6633c0e7.js"><link rel="prefetch" href="/assets/js/69.b517d5eb.js"><link rel="prefetch" href="/assets/js/7.96655c5b.js"><link rel="prefetch" href="/assets/js/70.91e8123d.js"><link rel="prefetch" href="/assets/js/71.37b05ac3.js"><link rel="prefetch" href="/assets/js/72.baccf67e.js"><link rel="prefetch" href="/assets/js/73.839ad090.js"><link rel="prefetch" href="/assets/js/74.aaeeb56a.js"><link rel="prefetch" href="/assets/js/75.1b602dbe.js"><link rel="prefetch" href="/assets/js/76.9c9ac7a9.js"><link rel="prefetch" href="/assets/js/77.0ac31ddb.js"><link rel="prefetch" href="/assets/js/78.8be46437.js"><link rel="prefetch" href="/assets/js/79.460cfcaa.js"><link rel="prefetch" href="/assets/js/8.3899d25c.js"><link rel="prefetch" href="/assets/js/80.bb1b9a4e.js"><link rel="prefetch" href="/assets/js/81.95d523a8.js"><link rel="prefetch" href="/assets/js/82.bcefbb2f.js"><link rel="prefetch" href="/assets/js/9.72be1f0a.js">
  <link rel="stylesheet" href="/assets/css/0.styles.28933c33.css">
</head>
<body>
<div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">从零开始的故事</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/" class="nav-link router-link-active">
  前端笔记
</a></li><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  日常记录
</a></li></ul></div></div><div class="nav-item"><a href="/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://github.com/Rem486/Rem486.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/" class="nav-link router-link-active">
  前端笔记
</a></li><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  日常记录
</a></li></ul></div></div><div class="nav-item"><a href="/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://github.com/Rem486/Rem486.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web/" aria-current="page" class="sidebar-link">前端笔记</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/css/android-disable-img-preview.html" class="sidebar-link">禁用安卓点击图片预览</a></li><li><a href="/web/css/chrome-scroll-bar.html" class="sidebar-link">chrome 自定义滚动条样式</a></li><li><a href="/web/css/css-hack.html" class="sidebar-link">css - hack</a></li><li><a href="/web/css/css-name.html" class="sidebar-link">css - 命名规范</a></li><li><a href="/web/css/img-auto-size.html" class="sidebar-link">图片自适应宽高</a></li><li><a href="/web/css/inline-block-overflow-hidden.html" class="sidebar-link">inline-block 对齐</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/js/file-download.html" class="sidebar-link">文件下载</a></li><li><a href="/web/js/object-oriented-programming.html" class="sidebar-link">面向对象编程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>移动端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/mobile/mobile-scroll-through.html" class="sidebar-link">滚动穿透</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/tool/babel-basic.html" class="sidebar-link">babel-basic</a></li><li><a href="/web/tool/babel-translate.html" class="sidebar-link">babel - preset-env和polyfill</a></li><li><a href="/web/tool/bash-pwd.html" class="sidebar-link">bash - 获取脚本的运行目录</a></li><li><a href="/web/tool/core-js.html" class="sidebar-link">core-js</a></li><li><a href="/web/tool/git-set-origin-url.html" class="sidebar-link">git - 配置/修改远程仓库地址</a></li><li><a href="/web/tool/git-delete-branch.html" class="sidebar-link">git - 删除远程分支</a></li><li><a href="/web/tool/git-minor-version.html" class="sidebar-link">git - 快速获取小版本</a></li><li><a href="/web/tool/git-command.html" class="sidebar-link">git - 常用命令</a></li><li><a href="/web/tool/graphql-basic.html" aria-current="page" class="active sidebar-link">graphql - 入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#什么是api" class="sidebar-link">什么是API</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#graphql" class="sidebar-link">GraphQL</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#schema-type" class="sidebar-link">Schema &amp; Type</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#query-mutation" class="sidebar-link">Query &amp; Mutation</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#subscription" class="sidebar-link">Subscription</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#validation" class="sidebar-link">Validation</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#execution" class="sidebar-link">Execution</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#introspection" class="sidebar-link">Introspection</a></li><li class="sidebar-sub-header"><a href="/web/tool/graphql-basic.html#best-practice" class="sidebar-link">Best practice</a></li></ul></li><li><a href="/web/tool/http-status.html" class="sidebar-link">http - 状态码</a></li><li><a href="/web/tool/http-TIME_WAIT-CLOSE_WAIT.html" class="sidebar-link">http - TIMEWAIT，CLOSEWAIT异常</a></li><li><a href="/web/tool/JSON-schema-basic.html" class="sidebar-link">JSON Schema - 入门</a></li><li><a href="/web/tool/ssh-password-free-login.html" class="sidebar-link">ssh - 免密登录及设置多个key</a></li><li><a href="/web/tool/npm-common-use-tips.html" class="sidebar-link">npm - 常用操作技巧</a></li><li><a href="/web/tool/npm-package.json.html" class="sidebar-link">npm - package.json属性详解</a></li><li><a href="/web/tool/npm-version-management.html" class="sidebar-link">npm - 管理项目版本号</a></li><li><a href="/web/tool/npm-update-package.html" class="sidebar-link">npm - 一键更新依赖包</a></li><li><a href="/web/tool/reg-basic.html" class="sidebar-link">正则 - 入门</a></li><li><a href="/web/tool/reg-escape.html" class="sidebar-link">正则 - 转义特殊字符</a></li><li><a href="/web/tool/markdown-basic.html" class="sidebar-link">Markdown 基本语法</a></li><li><a href="/web/tool/webpack-error.html" class="sidebar-link">webpack - 常见错误</a></li><li><a href="/web/tool/webpack-split-chunks.html" class="sidebar-link">webpack - 使用 splitChunks 分离第三方库</a></li><li><a href="/web/tool/yarn-npm-clean-cache.html" class="sidebar-link">yarn 和 npm - 清理缓存包</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>环境</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/env/docker-error.html" class="sidebar-link">docker - 常见报错</a></li><li><a href="/web/env/linux-command.html" class="sidebar-link">linux - 常用命令</a></li><li><a href="/web/env/linux-dns.html" class="sidebar-link">linux - 修改DNS</a></li><li><a href="/web/env/node-version-control.html" class="sidebar-link">管理nodejs版本</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/database/mongodb-error.html" class="sidebar-link">mongodb - 常见错误</a></li><li><a href="/web/database/mongodb-memo.html" class="sidebar-link">mongodb - 备忘录</a></li><li><a href="/web/database/mysql-start-stop.html" class="sidebar-link">mysql - 启动和关闭</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>杂项</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/other/article-collection.html" class="sidebar-link">文档收藏</a></li><li><a href="/web/other/node-spider-basic.html" class="sidebar-link">node - 爬虫初体验</a></li><li><a href="/web/other/idea-registered.html" class="sidebar-link">idea - 注册码持续更新</a></li><li><a href="/web/other/ie-image-dom7009.html" class="sidebar-link">IE - 图片加载报错DOM7009</a></li><li><a href="/web/other/mac-modify-host.html" class="sidebar-link">mac 修改 host</a></li><li><a href="/web/other/socket-error.html" class="sidebar-link">socket - 常见错误</a></li><li><a href="/web/other/timestamp-basic.html" class="sidebar-link">timestamp - 日期格式</a></li><li><a href="/web/other/vuepress-checkbox.html" class="sidebar-link">VuePress - 复选框、任务列表不生效怎么处理</a></li><li><a href="/web/other/websocket-basic.html" class="sidebar-link">webSocket - 入门</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="graphql-入门"><a href="#graphql-入门" class="header-anchor">#</a> graphql - 入门</h1> <h2 id="什么是api"><a href="#什么是api" class="header-anchor">#</a> 什么是API</h2> <blockquote><p>如果问上学的时候的我，我会说 API 就是 Application programming interface，这个时候HR就会不懂装懂地点点头然后让我进入下一轮面试。
如果问刚刚工作的我，我会说 API 就是接口嘛！PM灵光一现想出了一个新功能，我花几天时间写一个 API，把这个功能体现出来，前端做网页做APP的人可以用。
API 可以从封装方式来区分。主要是两个流派，一派是基于 REST，一派是基于 RPC。REST 是用 HTTP 封装，而 RPS 往往用自定义的协议封装。今天 REST 这一派衍生出了 GraphQL，而 RPC 这一派衍生出了 gRPC。这四种到底该用哪种，是今天互联网公司的日常争论。最后往往要吵到最核心的API定义：API到底是用来干什么的。</p></blockquote> <p>API 的本质就是帮人读数据、写数据。</p> <h2 id="graphql"><a href="#graphql" class="header-anchor">#</a> GraphQL</h2> <p>有几个特点：</p> <ul><li>不需要GET、POST、PUT、DELETE这么多动作，一切简化为读和写</li> <li>Response 不会一次给全部数据，用的时候要什么，服务器就返回什么</li> <li>PostBody 可以加入 variable</li> <li>写 API 之前先写 Schema，一切数据都得定义类型</li> <li>数据 Dependency 必须确立好，这样 Resource 结构一目了然</li></ul> <h2 id="schema-type"><a href="#schema-type" class="header-anchor">#</a> Schema &amp; Type</h2> <ul><li>GraphQL 有自己的简单语言 <code>GraphQL schema language</code>，来定义字段类型（Type）、数据结构、接口数据请求的规则；</li> <li><code>Type!</code> 表示非空（non-nullable）；</li> <li><code>[Type]</code> 表示返回对应类型的数组；</li> <li><code>[Type]!</code> 表示非空数组；</li> <li><code>[Type!]!</code> 表示非空数组，内容也非空；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> String
  <span class="token attr-name">content</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">length</span><span class="token punctuation">:</span> Int
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>Root Schema</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> Query
  <span class="token attr-name">mutation</span><span class="token punctuation">:</span> Mutation
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>GraphQL 基本上是一棵树（tree），标量（scalar）类型是叶子节点（leave node）；</li> <li>GraphQL 提供了一组开箱即用的默认标量类型：
<ul><li>Int: 有符号32位整数.</li> <li>Float: 有符号双精度浮点数.</li> <li>String: UTF-8字符序列.</li> <li>Boolean: 布尔值.</li> <li>ID: 表示唯一的标识符，通常用于重新获取对象或用作缓存的键。ID 类型的序列化方法与 String 相同。但是，将其定义为 ID 表示它并不需要 human‐readable。</li></ul></li> <li>也可以自定义标量类型。例如，定义一个 Date 类型：</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">scalar</span> <span class="token class-name">Date</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>枚举类型是一种特殊的标量，它限制在一个特殊的可选值集合内，定义枚举类型：</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">enum</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
  ZhangSan
  LiSi
  WangErMaZi
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>接口（Interface）是一种抽象类型，它定义了一个类型必须包含的某些字段（Field）；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>联合（Union）类型基本上是或（OR）逻辑；
<ul><li>注意，联合类型的成员需要是具体对象类型；</li> <li>你不能使用接口或者其他联合类型来创造一个联合类型；</li> <li>使用联合类型的时候要实现 <code>resolveType</code> 函数来处理 <code>__typename</code>；</li></ul></li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> Human <span class="token operator">|</span> Droid <span class="token operator">|</span> Starship
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>输入（Input）对象看上去和常规对象一模一样，除了关键字是 input 而不是 type。更新数据时使用；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">input</span> PersonInput <span class="token punctuation">{</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> Int
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>不能在 schema 中混淆输入和输出类型；</li> <li>类型系统（Type System）可以帮助 API 服务做类型检查；</li></ul> <h2 id="query-mutation"><a href="#query-mutation" class="header-anchor">#</a> Query &amp; Mutation</h2> <ul><li>查询（Query） 和变更（Mutation） 是 GraphQL 的两大支柱；</li> <li>Query 和 Mutation 也都是对象（Object）。 GraphQL 是面向对象编程（object-oriented-programming）；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">getMessage</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createMessage</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> MessageInput<span class="token punctuation">)</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>GraphQL 始终返回 JSON 对象；</li> <li>GraphQL error 也是返回 200；</li> <li>参数（Arguments）每个字段和嵌套对象都能有自己的一组参数；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span> <span class="token punctuation">{</span>
  getMessage<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">&quot;486&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>片段（Fragment）用来组织一组字段，方便复用；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">fragment</span> <span class="token fragment function">basicMessage</span> <span class="token keyword">on</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  content
  author
<span class="token punctuation">}</span>
<span class="token keyword">query</span> <span class="token punctuation">{</span> 
  getMessage<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">&quot;486&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token operator">...</span> <span class="token fragment function">basicMessage</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>变量（Variable）使用动态值替换查询中的静态参数；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token comment"># variable {&quot;id&quot;:&quot;486&quot;}</span>
<span class="token keyword">query</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  getMessage<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>片段（Fragment） 和变量（Variable）可以显著优化查询操作，只选择需要的字段（Field）可以提升性能；</li> <li>操作名称（Operation name），就像 Function name，匿名函数并不影响使用，但是加上名字可以方便追踪调试；</li> <li>指令（Directives）可以使用变量动态的改变查询结构：
<ul><li><code>@include(if: Boolean)</code> 仅在参数为 true 时，包含此字段。</li> <li><code>@skip(if: Boolean)</code> 如果参数为 true，跳过此字段。</li></ul></li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token comment"># {&quot;idx&quot;:&quot;486&quot;, &quot;withAuthor&quot;: false }</span>
<span class="token keyword">query</span> GetMessage <span class="token punctuation">(</span><span class="token variable">$idx</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$withAuthor</span><span class="token punctuation">:</span> Boolean<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  getMessage<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token variable">$idx</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content
    author <span class="token directive function">@include</span><span class="token punctuation">(</span><span class="token attr-name">if</span><span class="token punctuation">:</span> <span class="token variable">$withAuthor</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>查询操作是并行执行的，变更操作是依次执行的（这是为了防止竞争条件（Race Condition））；</li> <li>可以使用 <code>__typename</code> 来获取元字段，允许在查询的任何位置使用，以获得对象的类型名称。区分联合类型的时候有用；</li> <li>使用 <code>__type</code> 来查询 Schema；</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  __type<span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span><span class="token string">&quot;Mutation&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    fields <span class="token punctuation">{</span>
      name
      <span class="token keyword">type</span><span class="token punctuation">{</span>
        name
      <span class="token punctuation">}</span>
      args<span class="token punctuation">{</span>
        name
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="subscription"><a href="#subscription" class="header-anchor">#</a> Subscription</h2> <ul><li>GraphQL 还可以进行数据订阅，当前端发起订阅请求之后，如果后端发现数据改变，可以给前端推送实时信息。</li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token comment"># Schema 定义：</span>
<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
 <span class="token attr-name">subCreateMessage</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>

<span class="token comment"># 请求</span>
<span class="token keyword">subscription</span> <span class="token punctuation">{</span>
 subCreateMessage <span class="token punctuation">{</span>
   id
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Response：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;subCreateMessage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;486&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>node 服务端配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> graphqlHTTP <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-graphql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> SubscriptionServer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'subscriptions-transport-ws'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token number">4000</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/graphql'</span><span class="token punctuation">,</span> <span class="token function">graphqlHTTP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  schema<span class="token punctuation">,</span>
  rootValue<span class="token operator">:</span> root<span class="token punctuation">,</span>
  graphiql<span class="token operator">:</span> <span class="token punctuation">{</span> subscriptionEndpoint<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ws://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/subscriptions</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ws <span class="token operator">=</span> <span class="token function">createServer</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Running a GraphQL API server at localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/graphql</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Set up the WebSocket for handling GraphQL subscriptions.</span>
  <span class="token keyword">new</span> <span class="token class-name">SubscriptionServer</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      execute<span class="token punctuation">,</span>
      subscribe<span class="token punctuation">,</span>
      schema<span class="token punctuation">,</span>
      rootValue<span class="token operator">:</span> root
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      server<span class="token operator">:</span> ws<span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">'/subscriptions'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="validation"><a href="#validation" class="header-anchor">#</a> Validation</h2> <blockquote><p>I think when they invented GraphQL, they want to call it TreeQL, but then realized that object relationship can be pointing backward, like a graph. So TreeQL becomes GraphQL.</p></blockquote> <ul><li>查询规则：
<ul><li>只能查询给定类型上的字段；</li> <li>返回值不是标量或者枚举型，需要指明要从字段中获取的数据；(i.e. 始终以叶子节点结尾)</li></ul></li> <li>片段不能引用其自身或者创造回环，因为这会导致结果无边界；</li></ul> <p>这个查询是有效的：</p> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token punctuation">{</span> 
  hero <span class="token punctuation">{</span> 
    <span class="token operator">...</span><span class="token fragment function">NameAndAppearances</span> 
    friends <span class="token punctuation">{</span> 
      <span class="token operator">...</span><span class="token fragment function">NameAndAppearances</span> 
      friends <span class="token punctuation">{</span> 
        <span class="token operator">...</span><span class="token fragment function">NameAndAppearances</span> 
      <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token keyword">fragment</span> <span class="token fragment function">NameAndAppearances</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span> 
    name 
    appearsIn 
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>无效查询：</p> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">fragment</span> <span class="token fragment function">NameAndAppearancesAndFriends</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span> 
  name
  appearsIn
  friends <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">NameAndAppearancesAndFriends</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="execution"><a href="#execution" class="header-anchor">#</a> Execution</h2> <ul><li>每个类型的每个字段都由一个 resolver 函数支持，该函数产生下一个值。如果字段产生标量值，例如字符串或数字，则执行完成。如果一个字段产生一个对象，则该查询将继续执行该对象对应字段的解析器，直到生成标量值。GraphQL 查询始终以标量值结束（完美 OOP）。</li> <li>这是一个 js 的 resolver 例子：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Query: {
  human(obj, args, context, info) {
    return context.db.loadHumanByID(args.id).then(
      userData =&gt; new Human(userData)
    )
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>因为从数据库拉取数据的过程是一个异步操作，该方法返回了一个 Promise 对象。解析器能感知到 Promise 的进度，在获取到数据后，由于类型系统确定了 human 字段将返回一个 Human 对象，GraphQL 会根据类型系统预设好的 Human 类型决定如何解析字段。</p> <h2 id="introspection"><a href="#introspection" class="header-anchor">#</a> Introspection</h2> <p>如果是我们亲自设计了类型，那我们自然知道哪些类型是可用的。但如果类型不是我们设计的，我们也可以使用 GraphQL 的内省系统，通过查询 __schema 字段来向 GraphQL 询问哪些类型是可用的。
假如定义为：</p> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> String
  <span class="token attr-name">content</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">length</span><span class="token punctuation">:</span> Int
<span class="token punctuation">}</span>
<span class="token keyword">input</span> MessageInput <span class="token punctuation">{</span>
  <span class="token attr-name">content</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">getMessage</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Message
  <span class="token attr-name">getAllMessage</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createMessage</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> MessageInput<span class="token punctuation">)</span><span class="token punctuation">:</span> Message
  <span class="token attr-name">updateMessage</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">input</span><span class="token punctuation">:</span> MessageInput<span class="token punctuation">)</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  __schema <span class="token punctuation">{</span>
    types <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Response:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;__schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Message&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MessageInput&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;String&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ID&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Int&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Query&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Mutation&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Boolean&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__Schema&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__Type&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__TypeKind&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__Field&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__InputValue&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__EnumValue&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__Directive&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;__DirectiveLocation&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>返回的类型主要包括：</p> <ul><li>Query, Mutation, Message, MessageInput : 这些是我们在类型系统中定义的类型；</li> <li>String, Boolean : 这些是内建的标量，由类型系统提供；</li> <li>__Schema, __Type, __TypeKind, __Field, __InputValue, __EnumValue, __Directive : 这些有着两个下划线的类型是内省系统的一部分；</li></ul> <p>继续查询 <code>Query</code>：</p> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  __type<span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span><span class="token string">&quot;Query&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    kind
    fields <span class="token punctuation">{</span>
      name
      <span class="token keyword">type</span> <span class="token punctuation">{</span>
        kind
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Response:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;__type&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Query&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OBJECT&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getMessage&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OBJECT&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getAllMessage&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LIST&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>Query 是一个 <code>OBJECT</code>，有两个字段 <code>getMessage</code> 和 <code>getAllMessage</code></p> <h2 id="best-practice"><a href="#best-practice" class="header-anchor">#</a> Best practice</h2> <ul><li>HTTP</li></ul> <p>Good: 通过单入口来提供 HTTP 服务的完整功能（Query &amp; Mutation）；
Bad: 通过暴露一组 URL 且每个 URL 只暴露一个资源； (虽然 GraphQL 也可以暴露多个资源 URL 来使用，但这可能导致在使用 <a href="https://github.com/graphql/graphiql" target="_blank" rel="noopener noreferrer">GraphiQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等工具时遇到困难。)</p> <ul><li><p>JSON：使用 JSON 并开启 GZIP 压缩，<code>Accept-Encoding: gzip</code></p></li> <li><p>空：在 GraphQL 类型系统中，默认情况下每个字段都<code>可以为空</code>。用来避免各种异常情况下请求完全失败；</p></li> <li><p>GraphQL 服务可能会像&quot;聊天&quot;一样反复从您的数据库加载数据, 考虑通过批处理和缓存来优化性能；</p></li> <li><p>可视化工具 <a href="https://github.com/APIs-guru/graphql-voyager" target="_blank" rel="noopener noreferrer">graphql-voyager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>应该在哪里定义真正的业务逻辑？应该在哪里验证，检查用户权限？就是在专门的业务逻辑层里。业务逻辑层应作为执行业务域规则的唯一正确来源。</p></li></ul> <p><img src="/img/graphql-basic-1.png" alt="业务逻辑"></p> <ul><li>GraphQL 仅使用 GET 和 POST：
<ul><li>对于 GET, 接受 <code>?query=...&amp;variables=...&amp;operationName=...</code></li> <li>对于 POST，使用 <code>Content-Type:application/json</code>
请求体：</li></ul></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;operationName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;variables&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;myVariable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;someValue&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>响应：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 正确返回
{ 
  &quot;data&quot;: { ... } 
}
# 错误返回
{ 
  &quot;errors&quot;: [ ... ] 
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果没有返回错误，响应中不应当出现 &quot;errors&quot; 字段。如果没有返回数据，则 根据 <a href="https://spec.graphql.cn//#sec-Data-" target="_blank" rel="noopener noreferrer">GraphQL 规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，只能在执行期间发生错误时才能包含 &quot;data&quot; 字段。</p> <ul><li>生产环境需要禁用 GraphiQL；</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/graphql'</span><span class="token punctuation">,</span> <span class="token function">graphqlHTTP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  schema<span class="token operator">:</span> MySessionAwareGraphQLSchema<span class="token punctuation">,</span>
  graphiql<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>对于分页，基于游标的分页是最强大的分页，建议用 base64 编码游标。</p></li> <li><p>全局对象识别：一致的对象访问实现了简单的缓存和对象查找。
如果对象拥有全局唯一的ID，GraphQL schema 的格式允许通过根查询对象上的 node 字段获取任何对象。
如果 id 相同，则必须是同一对象。</p></li></ul> <div class="language-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token comment"># 具有全局唯一 ID 的对象</span>
<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token comment"># 对象的 ID</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token comment"># 内容</span>
  <span class="token attr-name">content</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># 查询</span>
<span class="token keyword">query</span> retrieveNodeById <span class="token punctuation">{</span> 
  node<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    id 
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span> 
      content
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>全局对象标识可以用来作为缓存的 key。 在过去通常使用 <code>&lt;url&gt;:&lt;response&gt;</code> 这样的缓存 key，现在可以使用 <code>&lt;object_id&gt;:&lt;object&gt;</code>。</li></ul> <p><strong>参考</strong></p> <ul><li><a href="https://graphql.cn/learn/" target="_blank" rel="noopener noreferrer">GraphQL 入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://spec.graphql.cn" target="_blank" rel="noopener noreferrer">GraphQL 规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/109424841" target="_blank" rel="noopener noreferrer">【从初学到放弃】GraphQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/40418866" target="_blank" rel="noopener noreferrer">《解析 GraphQL 的查询语法》【译】<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/12/2021, 3:22:37 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web/tool/git-command.html" class="prev">
        git - 常用命令
      </a></span> <span class="next"><a href="/web/tool/http-status.html">
        http - 状态码
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
<script src="/assets/js/app.457c0c80.js" defer></script><script src="/assets/js/2.e856cdfd.js" defer></script><script src="/assets/js/67.77571cad.js" defer></script>
<a style="text-align: center;display: block" href="https://beian.miit.gov.cn">蜀ICP备18030457号-1</a>
</body>
<script type="text/javascript" async
        src="//s5.cnzz.com/z_stat.php?id=1275911745&web_id=1275911745&show=none"></script>
<script>
(function () {
  var bp = document.createElement('script');
  // var curProtocol = window.location.protocol.split(':')[0];
  // if (curProtocol === 'https') {
  //   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  // }
  // else {
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  // }
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(bp, s);
})();
</script>
</html>
