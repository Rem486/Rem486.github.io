<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>文件下载 | 从零开始的故事</title>
  <meta name="description" content="">
  <meta name="keywords" content="前端博客,前端知识,前端备忘录,程序员笔记,css,html,javascript,git,linux">
  <meta name="baidu-site-verification" content="utzmmiwMvm"/>
  <link rel="icon" href="/img/logo.ico">
  <meta name="description" content="前端文件下载">
    <meta property="article:published_time" content="2021-02-24T00:00:00.000Z">
    <meta property="article:modified_time" content="2021-03-22T09:00:16.000Z">
    <meta property="og:site_name" content="从零开始的故事">
    <meta property="og:title" content="文件下载">
    <meta property="og:description" content="前端文件下载">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/web/js/file-download.html">
    <meta name="twitter:title" content="文件下载">
    <meta name="twitter:description" content="前端文件下载">
    <meta name="twitter:url" content="/web/js/file-download.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label2" content="Filed under">
  <link rel="preload" href="/assets/css/0.styles.d331a4a6.css" as="style"><link rel="preload" href="/assets/js/app.8d7374f8.js" as="script"><link rel="preload" href="/assets/js/2.c66a9939.js" as="script"><link rel="preload" href="/assets/js/48.76dd9c46.js" as="script"><link rel="prefetch" href="/assets/js/10.70c1678f.js"><link rel="prefetch" href="/assets/js/11.57a59e30.js"><link rel="prefetch" href="/assets/js/12.807ca00f.js"><link rel="prefetch" href="/assets/js/13.27e036be.js"><link rel="prefetch" href="/assets/js/14.e298eef4.js"><link rel="prefetch" href="/assets/js/15.6c9f213d.js"><link rel="prefetch" href="/assets/js/16.ce8efbea.js"><link rel="prefetch" href="/assets/js/17.ad5077af.js"><link rel="prefetch" href="/assets/js/18.265b1021.js"><link rel="prefetch" href="/assets/js/19.20e9a748.js"><link rel="prefetch" href="/assets/js/20.dc643f88.js"><link rel="prefetch" href="/assets/js/21.7a3a01e9.js"><link rel="prefetch" href="/assets/js/22.419baeef.js"><link rel="prefetch" href="/assets/js/23.39294c25.js"><link rel="prefetch" href="/assets/js/24.0e878239.js"><link rel="prefetch" href="/assets/js/25.3591837b.js"><link rel="prefetch" href="/assets/js/26.63fc3207.js"><link rel="prefetch" href="/assets/js/27.0b00e212.js"><link rel="prefetch" href="/assets/js/28.2255ddee.js"><link rel="prefetch" href="/assets/js/29.e738a04d.js"><link rel="prefetch" href="/assets/js/3.2bcd8468.js"><link rel="prefetch" href="/assets/js/30.65aef1be.js"><link rel="prefetch" href="/assets/js/31.88c114bc.js"><link rel="prefetch" href="/assets/js/32.2a0a7288.js"><link rel="prefetch" href="/assets/js/33.65f85117.js"><link rel="prefetch" href="/assets/js/34.73832477.js"><link rel="prefetch" href="/assets/js/35.8301d136.js"><link rel="prefetch" href="/assets/js/36.49380bdb.js"><link rel="prefetch" href="/assets/js/37.97c588b1.js"><link rel="prefetch" href="/assets/js/38.c24d09af.js"><link rel="prefetch" href="/assets/js/39.bf028c90.js"><link rel="prefetch" href="/assets/js/4.d2a58c11.js"><link rel="prefetch" href="/assets/js/40.2316eab5.js"><link rel="prefetch" href="/assets/js/41.d3ca74d3.js"><link rel="prefetch" href="/assets/js/42.2f215b9b.js"><link rel="prefetch" href="/assets/js/43.6952423d.js"><link rel="prefetch" href="/assets/js/44.8a327cca.js"><link rel="prefetch" href="/assets/js/45.804cfcdf.js"><link rel="prefetch" href="/assets/js/46.3887304b.js"><link rel="prefetch" href="/assets/js/47.a845fc39.js"><link rel="prefetch" href="/assets/js/49.29eb2cb3.js"><link rel="prefetch" href="/assets/js/5.bbfe7e5f.js"><link rel="prefetch" href="/assets/js/50.b0d1342a.js"><link rel="prefetch" href="/assets/js/51.b934af3e.js"><link rel="prefetch" href="/assets/js/52.8012d912.js"><link rel="prefetch" href="/assets/js/53.f79ec5ee.js"><link rel="prefetch" href="/assets/js/54.27fdd4e3.js"><link rel="prefetch" href="/assets/js/55.723adb3d.js"><link rel="prefetch" href="/assets/js/56.ac76db05.js"><link rel="prefetch" href="/assets/js/57.45b82915.js"><link rel="prefetch" href="/assets/js/58.4f39429b.js"><link rel="prefetch" href="/assets/js/59.5eab40e1.js"><link rel="prefetch" href="/assets/js/6.a6ef3a2b.js"><link rel="prefetch" href="/assets/js/60.a7bf9568.js"><link rel="prefetch" href="/assets/js/61.da48b669.js"><link rel="prefetch" href="/assets/js/62.9c09640b.js"><link rel="prefetch" href="/assets/js/63.98b18e00.js"><link rel="prefetch" href="/assets/js/64.bf4a26d2.js"><link rel="prefetch" href="/assets/js/65.34ffcfc6.js"><link rel="prefetch" href="/assets/js/66.852b8c87.js"><link rel="prefetch" href="/assets/js/67.c022eb86.js"><link rel="prefetch" href="/assets/js/68.a02072fe.js"><link rel="prefetch" href="/assets/js/69.4a5cfb73.js"><link rel="prefetch" href="/assets/js/7.4c9e8a9f.js"><link rel="prefetch" href="/assets/js/70.a80b16ea.js"><link rel="prefetch" href="/assets/js/71.f8277adf.js"><link rel="prefetch" href="/assets/js/72.6a8c4267.js"><link rel="prefetch" href="/assets/js/73.08686721.js"><link rel="prefetch" href="/assets/js/74.85599ec9.js"><link rel="prefetch" href="/assets/js/75.b451457c.js"><link rel="prefetch" href="/assets/js/76.05f54de1.js"><link rel="prefetch" href="/assets/js/77.cf167288.js"><link rel="prefetch" href="/assets/js/78.abafd8f7.js"><link rel="prefetch" href="/assets/js/79.0e8966db.js"><link rel="prefetch" href="/assets/js/8.44ede4f7.js"><link rel="prefetch" href="/assets/js/80.d9723c84.js"><link rel="prefetch" href="/assets/js/81.845b4b14.js"><link rel="prefetch" href="/assets/js/82.5fa24bd9.js"><link rel="prefetch" href="/assets/js/83.d0948730.js"><link rel="prefetch" href="/assets/js/84.0d3857ca.js"><link rel="prefetch" href="/assets/js/85.5b88d6f8.js"><link rel="prefetch" href="/assets/js/86.41efd392.js"><link rel="prefetch" href="/assets/js/87.1dc92833.js"><link rel="prefetch" href="/assets/js/88.3537c07e.js"><link rel="prefetch" href="/assets/js/9.55b0ed40.js">
  <link rel="stylesheet" href="/assets/css/0.styles.d331a4a6.css">
</head>
<body>
<div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">从零开始的故事</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE Menu" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="FE Menu" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/" class="nav-link router-link-active">
  前端笔记
</a></li></ul></div></div><div class="nav-item"><a href="/server/" class="nav-link">
  服务器
</a></div><div class="nav-item"><a href="/daily/" class="nav-link">
  日常记录
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  做题家
</a></div><div class="nav-item"><a href="/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://github.com/Rem486/Rem486.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE Menu" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="FE Menu" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/" class="nav-link router-link-active">
  前端笔记
</a></li></ul></div></div><div class="nav-item"><a href="/server/" class="nav-link">
  服务器
</a></div><div class="nav-item"><a href="/daily/" class="nav-link">
  日常记录
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  做题家
</a></div><div class="nav-item"><a href="/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://github.com/Rem486/Rem486.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web/" aria-current="page" class="sidebar-link">前端笔记</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/css/android-disable-img-preview.html" class="sidebar-link">禁用安卓点击图片预览</a></li><li><a href="/web/css/chrome-scroll-bar.html" class="sidebar-link">chrome 自定义滚动条样式</a></li><li><a href="/web/css/css-hack.html" class="sidebar-link">css - hack</a></li><li><a href="/web/css/css-name.html" class="sidebar-link">css - 命名规范</a></li><li><a href="/web/css/img-auto-size.html" class="sidebar-link">图片自适应宽高</a></li><li><a href="/web/css/inline-block-overflow-hidden.html" class="sidebar-link">inline-block 对齐</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/js/file-download.html" aria-current="page" class="active sidebar-link">文件下载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/js/file-download.html#直接下载" class="sidebar-link">直接下载</a></li><li class="sidebar-sub-header"><a href="/web/js/file-download.html#请求-api-下载" class="sidebar-link">请求 API 下载</a></li><li class="sidebar-sub-header"><a href="/web/js/file-download.html#文件名编码问题" class="sidebar-link">文件名编码问题</a></li><li class="sidebar-sub-header"><a href="/web/js/file-download.html#文件名长度限制" class="sidebar-link">文件名长度限制</a></li></ul></li><li><a href="/web/js/object-oriented-programming.html" class="sidebar-link">面向对象编程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>移动端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/mobile/mobile-scroll-through.html" class="sidebar-link">滚动穿透</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/tool/babel-basic.html" class="sidebar-link">babel-basic</a></li><li><a href="/web/tool/babel-translate.html" class="sidebar-link">babel - preset-env和polyfill</a></li><li><a href="/web/tool/bash-pwd.html" class="sidebar-link">bash - 获取脚本的运行目录</a></li><li><a href="/web/tool/core-js.html" class="sidebar-link">core-js</a></li><li><a href="/web/tool/git-command.html" class="sidebar-link">git - 常用命令</a></li><li><a href="/web/tool/git-commit-emoji.html" class="sidebar-link">git - emoji 指南</a></li><li><a href="/web/tool/git-set-origin-url.html" class="sidebar-link">git - 配置/修改远程仓库地址</a></li><li><a href="/web/tool/git-delete-branch.html" class="sidebar-link">git - 删除远程分支</a></li><li><a href="/web/tool/git-minor-version.html" class="sidebar-link">git - 快速获取小版本</a></li><li><a href="/web/tool/graphql-basic.html" class="sidebar-link">graphql - 入门</a></li><li><a href="/web/tool/http-status.html" class="sidebar-link">http - 状态码</a></li><li><a href="/web/tool/http-TIME_WAIT-CLOSE_WAIT.html" class="sidebar-link">http - TIMEWAIT，CLOSEWAIT异常</a></li><li><a href="/web/tool/JSON-schema-basic.html" class="sidebar-link">JSON Schema - 入门</a></li><li><a href="/web/tool/npm-common-use-tips.html" class="sidebar-link">npm - 常用操作技巧</a></li><li><a href="/web/tool/npm-package.json.html" class="sidebar-link">npm - package.json属性详解</a></li><li><a href="/web/tool/npm-version-management.html" class="sidebar-link">npm - 管理项目版本号</a></li><li><a href="/web/tool/npm-update-package.html" class="sidebar-link">npm - 一键更新依赖包</a></li><li><a href="/web/tool/reg-basic.html" class="sidebar-link">正则 - 入门</a></li><li><a href="/web/tool/reg-escape.html" class="sidebar-link">正则 - 转义特殊字符</a></li><li><a href="/web/tool/markdown-basic.html" class="sidebar-link">Markdown 基本语法</a></li><li><a href="/web/tool/webpack-error.html" class="sidebar-link">webpack - 常见错误</a></li><li><a href="/web/tool/webpack-split-chunks.html" class="sidebar-link">webpack - 使用 splitChunks 分离第三方库</a></li><li><a href="/web/tool/yarn-npm-clean-cache.html" class="sidebar-link">yarn 和 npm - 清理缓存包</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>杂项</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/other/article-collection.html" class="sidebar-link">文档收藏</a></li><li><a href="/web/other/node-spider-basic.html" class="sidebar-link">node - 爬虫初体验</a></li><li><a href="/web/other/idea-registered.html" class="sidebar-link">idea - 注册码持续更新</a></li><li><a href="/web/other/ie-image-dom7009.html" class="sidebar-link">IE - 图片加载报错DOM7009</a></li><li><a href="/web/other/mac-modify-host.html" class="sidebar-link">mac 修改 host</a></li><li><a href="/web/other/socket-error.html" class="sidebar-link">socket - 常见错误</a></li><li><a href="/web/other/timestamp-basic.html" class="sidebar-link">timestamp - 日期格式</a></li><li><a href="/web/other/vuepress-checkbox.html" class="sidebar-link">VuePress - 复选框、任务列表不生效怎么处理</a></li><li><a href="/web/other/websocket-basic.html" class="sidebar-link">webSocket - 入门</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="文件下载"><a href="#文件下载" class="header-anchor">#</a> 文件下载</h1> <p>先看<a href="#%E7%BB%93%E8%AE%BA">结论</a></p> <p>前端文件下载主要有两种方式。</p> <h2 id="直接下载"><a href="#直接下载" class="header-anchor">#</a> 直接下载</h2> <p>下载静态资源或者 api 返回文件流，对于异常处理没有什么要求的，都可以使用直接下载的方式。但是仅支持浏览器无法识别的文件。如果是浏览器支持的文件格式（如：txt、jpg、png、mp3）,就不会触发下载，而是直接用浏览器打开文件。</p> <ol><li>使用 <code>&lt;a&gt;</code> 标签下载，<code>download</code> 同源可以指定文件名（IE 不支持）。</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/example.json<span class="token punctuation">&quot;</span></span> <span class="token attr-name">download</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>A.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>使用 js 直接下载，主要有两种方式 <code>window.location.href</code> 和 <code>window.open</code>。都不能指定文件名。这两种方式默认情况下表现形式基本相同。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">'/static/example.json'</span>

<span class="token comment">// 方式1</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">;</span>

<span class="token comment">// 方式2</span>
window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>使用 iframe 下载文件。缺点没法处理错误情况。</li></ol> <p>需要注意，当下载发生错误的时候（被删除）：</p> <ul><li><code>&lt;a&gt;</code> 当前页跳转到错误页；</li> <li><code>window.location.href</code> 当前页跳转到错误页；</li> <li><code>window.open</code> 在新的窗口打开错误页；</li></ul> <p>对于浏览器可以识别的文件格式（txt、jpg、png、mp3），可以通过设置 <code>Content-Disposition</code>，告诉浏览器资源应该被下载到本地。</p> <blockquote><p>在常规的 HTTP 响应中，Content-Disposition 响应头指示回复的内容该以何种形式展示，是以内联的形式（即网页或者页面的一部分），还是以附件的形式下载并保存到本地。</p></blockquote> <div class="language-http request line-numbers-mode"><pre class="language-http"><code><span class="token header-name keyword">Content-Disposition:</span> attachment; filename=&quot;filename.jpg&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="请求-api-下载"><a href="#请求-api-下载" class="header-anchor">#</a> 请求 API 下载</h2> <p>如果需要处理异常情况，直接下载的方式就不适用了。就需要通过请求 API 返回文件再下载，并处理异常情况。</p> <p>axios 栗子，通过设置 <code>responseType: 'blob'</code> 来指定返回响应数据类型为 <code>blob</code>，然后下载：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span><span class="token string">'get'</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">'/download/example.json'</span><span class="token punctuation">,</span>
  responseType<span class="token operator">:</span> <span class="token string">'blob'</span><span class="token punctuation">,</span> <span class="token comment">// 关键</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">downloadFile</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token string">'A.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 处理异常情况</span>
  <span class="token function">blobToJSON</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">downloadFile</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'download'</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>data <span class="token keyword">instanceof</span> <span class="token class-name">Blob</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'[Download] Unsupported file type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 兼容IE</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>navigator <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>msSaveBlob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">msSaveBlob</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 使用 a 标签下载</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>download <span class="token operator">=</span> name<span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">blobToJSON</span> <span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>blob <span class="token keyword">instanceof</span> <span class="token class-name">Blob</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'[Download] not blob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>blob<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> result<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p><strong>responseType</strong></p> <p><code>responseType</code> 属性允许我们手动的设置返回数据的类型。如果我们将它设置为一个空字符串，它将使用默认的 <code>text</code> 类型。</p> <table><thead><tr><th>responseType值</th> <th>xhr.response 数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>&quot;&quot;</td> <td>DOMString</td> <td>为空字符串时，采用默认类型，与 <code>text</code> 相同</td></tr> <tr><td>&quot;text&quot;</td> <td>DOMString</td> <td></td></tr> <tr><td>&quot;document&quot;</td> <td>Document 对象</td> <td>希望返回 HTML/XML 格式数据时使用</td></tr> <tr><td>&quot;json&quot;</td> <td>javascript 对象</td> <td>存在兼容性问题，IE 不支持</td></tr> <tr><td>&quot;blob&quot;</td> <td>Blob 对象</td> <td></td></tr> <tr><td>&quot;arraybuffer&quot;</td> <td>ArrayBuffer 对象</td> <td></td></tr></tbody></table> <p><strong>arraybuffer</strong></p> <p>下载时也可以设置 <code>responseType: 'arraybuffer'</code>，除了下载返回数据的时候先转成 <code>blob</code> 对象再下载，异常处理时 <code>arraybuffer</code> 转成 <code>JSON</code> 对象，其它表现 <code>blob</code> 一致（暂时没有找到区别）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// arraybuffer 转 blob</span>
<span class="token keyword">function</span> <span class="token function">arraybufferToBlob</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// arraybuffer 转 json</span>
<span class="token keyword">function</span> <span class="token function">arraybufferToJSON</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> encode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IE 不支持，引入第三方库或者先转 blob 再转 JSON。</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>encode<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'[Download] arraybuffer parse error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> result<span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><ul><li>ArrayBuffer(又称类型化数组)：用来表示通用的、固定长度的原始二进制数据缓冲区。你不能直接操纵 ArrayBuffer 的内容，而是需要创建一个类型化数组对象或 DataView 对象，该对象以特定格式表示缓冲区，并使用该对象读取和写入缓冲区的内容。</li> <li>Blob（Binary Large Object）：二进制大数据对象，表示一个不可变、原始数据的类文件对象。Blob 表示的不一定是JavaScript原生格式的数据。</li></ul></blockquote> <h2 id="文件名编码问题"><a href="#文件名编码问题" class="header-anchor">#</a> 文件名编码问题</h2> <p>通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition" target="_blank" rel="noopener noreferrer"><code>Content-Disposition</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以定义文件名。</p> <div class="language-http request line-numbers-mode"><pre class="language-http"><code><span class="token header-name keyword">Content-Disposition:</span> attachment;
                     filename=&quot;fname&quot;;
                     filename*=utf-8''encoded_fname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>fname 是文件名字符串，不需要编码， encoded_fname 是采用了 <a href="https://tools.ietf.org/html/rfc5987" target="_blank" rel="noopener noreferrer">RFC 5987<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中定义的编码规则（URL编码）处理过的文件名。</p> <blockquote><p>Producers MUST use either the &quot;UTF-8&quot; ([RFC3629]) or the &quot;ISO-8859-1&quot; ([ISO-8859-1]) character set.</p></blockquote> <p>当二者同时出现的时候，应该优先采用 <code>filename*</code>。</p> <p>栗子： 文件名 <code>한.txt</code></p> <p><img src="/img/file-download-1.png" alt="Content-Disposition"></p> <p><code>filename*</code> 是用单引号作为分隔符，将等号右边分成了三部分：第一部分是字符集(utf-8)，中间部分是语言(未填写)，最后的<code>%ED%95%9C.txt</code>代表了实际值。</p> <blockquote><p>A single quote is used to separate the character set, language, and actual value information in the parameter value string, and an percent sign is used to flag octets encoded in hexadecimal.</p></blockquote> <h2 id="文件名长度限制"><a href="#文件名长度限制" class="header-anchor">#</a> 文件名长度限制</h2> <blockquote><p>Linux文件名的长度限制是 255 个字符<br>
windows下完全限定文件名必须少于 260 个字符，目录名必须小于 248 个字符</p></blockquote> <p>关于文件名长度限制，windows 上实测文件名最多244个字符。
文件名超长，浏览器下载时会<strong>自动截取</strong></p> <ul><li>IE：186</li> <li>chrome：230</li> <li>firefox：225</li> <li>safari：227</li></ul> <p>safari 表现比较特殊，对 <code>Content-Disposition</code> 整体长度有限制，不能超过 255 个字节，<code>filename*</code> 不会解析可以直接使用非 ASCII 字符。一个中文占 3 个字节。所以大概可以支持 73 个汉字，如果要使用 URL 编码，大概只能支持 25 个汉字（不含后缀）。</p> <p>摘自 safari 社区</p> <p><img src="/img/file-download-2.png" alt="safari feat"></p> <p>其它应用处理文件名长度情况：</p> <ul><li>微云：93</li> <li>csdn：80</li></ul> <h3 id="结论"><a href="#结论" class="header-anchor">#</a> 结论</h3> <ul><li>主要看是否需要处理异常情况，来决定是<strong>直接下载</strong>还是<strong>请求 api 下载</strong></li> <li>直接通过 <code>a</code> 标签或者 <code>location.href</code> 下载，一般没有编码问题；</li> <li>需要处理异常，则通过 js 设置请求参数 <code>responseType: 'blob'</code> 或者 <code>responseType: 'arraybuffer'</code>，拿到返回文件再下载
<ol><li>异常处理的时候返回对象也是 <code>blob</code> 或者 <code>arraybuffer</code>，需要转换；</li></ol></li> <li>如果用户设置文件名（含非 ASCII 字符）长度最好不超过 <code>73</code>，具体处理方案：
<ol><li>api 使用 URL 编码处理文件名，前端解码（<code>decodeURI</code>）。注意：Safari 长度限制了 225 个字节左右（中文占 3 个字节，编码后占 9 个），名字全中文不超过 73 个字，支持非 ASCII 字符，直接下载不会解析文件名；</li> <li>api 不处理文件名，前端生成文件名或者替换非 ASCII 字符部分。注意：需要前后端统一文件名生成规则，长度 186 以内；</li> <li>文件名使用英文。注意：长度 186 以内；</li> <li>使用异步任务的方式下载，请求 api 后服务端生成文件，返回文件地址，前端直接下载。把异常处理放在请求文件地址那一步。注意：长度 186 以内，服务端需要存放文件，涉及有效期和隐私等；</li></ol></li></ul> <h3 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h3> <p>可选第三方库：</p> <ul><li><a href="https://github.com/eligrey/FileSaver.js" target="_blank" rel="noopener noreferrer">FileSaver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h3> <ul><li><a href="https://blog.csdn.net/weixin_43102083/article/details/109611367" target="_blank" rel="noopener noreferrer">下载的附件名总乱码？你该去读一下 RFC 文档了！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discussionschinese.apple.com/thread/252365785?answerId=254471646322" target="_blank" rel="noopener noreferrer">问： Content-Disposition字段为什么不支持对filename的百分号编码？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.91ri.org/10273.html" target="_blank" rel="noopener noreferrer">Content-Disposition中filename字段的字符编码技巧<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/93551/how-to-encode-the-filename-parameter-of-content-disposition-header-in-http" target="_blank" rel="noopener noreferrer">How to encode the filename parameter of Content-Disposition header in HTTP?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.zuo11.com/blog/2020/6/content-dispositon.html" target="_blank" rel="noopener noreferrer">Invalid character in header content [&quot;Content-Disposition&quot;]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.robotshell.org/2012/deal-with-http-header-encoding-for-file-download/" target="_blank" rel="noopener noreferrer">正确处理下载文件时HTTP头的编码问题（Content-Disposition）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://tool.oschina.net/commons" target="_blank" rel="noopener noreferrer">常用对照表 Content-type<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/candlia/p/11919885.html" target="_blank" rel="noopener noreferrer">深入理解xhr responseType blob arrayBuffer document text json使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://caibaojian.com/blob.html" target="_blank" rel="noopener noreferrer">你不知道的 Blob<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/22/2021, 5:00:16 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web/css/inline-block-overflow-hidden.html" class="prev">
        inline-block 对齐
      </a></span> <span class="next"><a href="/web/js/object-oriented-programming.html">
        面向对象编程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
<script src="/assets/js/app.8d7374f8.js" defer></script><script src="/assets/js/2.c66a9939.js" defer></script><script src="/assets/js/48.76dd9c46.js" defer></script>
<a style="text-align: center;display: block" href="https://beian.miit.gov.cn">蜀ICP备18030457号-1</a>
</body>
<script type="text/javascript" async
        src="//s5.cnzz.com/z_stat.php?id=1275911745&web_id=1275911745&show=none"></script>
<script>
(function () {
  var bp = document.createElement('script');
  // var curProtocol = window.location.protocol.split(':')[0];
  // if (curProtocol === 'https') {
  //   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  // }
  // else {
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  // }
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(bp, s);
})();
</script>
</html>
