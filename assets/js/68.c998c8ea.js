(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{421:function(n,e,t){"use strict";t.r(e);var o=t(40),r=Object(o.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"ecmascript-æ–°ç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-æ–°ç‰¹æ€§"}},[n._v("#")]),n._v(" ECMAScript - æ–°ç‰¹æ€§")]),n._v(" "),t("p",[n._v("// todo")]),n._v(" "),t("p",[n._v('ES2020-ES11\nES2020 æ˜¯ä¸ 2020 å¹´ç›¸å¯¹åº”çš„ ECMAScript ç‰ˆæœ¬\nString.protype.matchAll\nmatchAll()æ–¹æ³•è¿”å›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨å½“å‰å­—ç¬¦ä¸²çš„æ‰€æœ‰åŒ¹é…\nä¸è¿‡ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨ï¼ˆIteratorï¼‰ï¼Œè€Œä¸æ˜¯æ•°ç»„ã€‚éå†å™¨è½¬ä¸ºæ•°ç»„æ˜¯éå¸¸ç®€å•çš„ï¼Œä½¿ç”¨...è¿ç®—ç¬¦å’Œ Array.from()æ–¹æ³•å°±å¯ä»¥äº†ã€‚\nconst string = "test1test2test3";\nconst regex = /t(e)(st(\\d?))/g;')]),n._v(" "),t("p",[n._v("const newdata = string.matchAll(regex);")]),n._v(" "),t("p",[n._v('for (const match of newdata) {\nconsole.log(match);\n}\n// ["test1", "e", "st1", "1", index: 0, input: "test1test2test3"]\n// ["test2", "e", "st2", "2", index: 5, input: "test1test2test3"]\n// ["test3", "e", "st3", "3", index: 10, input: "test1test2test3"]')]),n._v(" "),t("p",[n._v("// è½¬ä¸ºæ•°ç»„çš„æ–¹æ³•ä¸€\n[...newdata];")]),n._v(" "),t("p",[n._v('// è½¬ä¸ºæ•°ç»„çš„æ–¹æ³•äºŒ\nArray.from(newdata);\nå¤åˆ¶ä»£ç \nè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨-matchAll\nDynamic import\nimport(specifier)å‡½æ•°ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½æ¨¡å—, import å‡½æ•°çš„å‚æ•° specifierï¼ŒæŒ‡å®šæ‰€è¦åŠ è½½çš„æ¨¡å—çš„ä½ç½®ã€‚import å‘½ä»¤èƒ½å¤Ÿæ¥å—ä»€ä¹ˆå‚æ•°ï¼Œimport()å‡½æ•°å°±èƒ½æ¥å—ä»€ä¹ˆå‚æ•°ï¼Œä¸¤è€…åŒºåˆ«ä¸»è¦æ˜¯åè€…ä¸ºåŠ¨æ€åŠ è½½ã€‚\nimport()è¿”å›ä¸€ä¸ª Promise å¯¹è±¡\nconst someVariable = "user";')]),n._v(" "),t("p",[n._v("import("),t("code",[n._v("./some-modules/${someVariable}.js")]),n._v(')\n.then((module) => {\n// ä¸šåŠ¡é€»è¾‘\nmodule.loadPageInto(main);\n})\n.catch((err) => {\n// åŠ è½½å¤±è´¥\n});\nå¤åˆ¶ä»£ç \nè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨-import\nPromise.allSettled\nPromise.allSettled()æ–¹æ³•æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚åªæœ‰ç­‰åˆ°æ‰€æœ‰è¿™äº›å‚æ•°å®ä¾‹éƒ½è¿”å›ç»“æœï¼Œä¸ç®¡æ˜¯fulfilledè¿˜æ˜¯rejectedï¼ŒåŒ…è£…å®ä¾‹æ‰ä¼šç»“æŸ\næœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå¼‚æ­¥è¯·æ±‚çš„ç»“æœï¼Œåªå…³å¿ƒæ‰€æœ‰çš„è¯·æ±‚æœ‰æ²¡æœ‰ç»“æŸã€‚è¿™æ—¶ï¼ŒPromise.allSettled()æ–¹æ³•å°±å¾ˆæœ‰ç”¨\nconst promises = [fetch("index.html"), fetch("https://does-not-exist/")];\nconst results = await Promise.allSettled(promises);')]),n._v(" "),t("p",[n._v('// è¿‡æ»¤å‡ºæˆåŠŸçš„è¯·æ±‚\nconst successfulPromises = results.filter((p) => p.status === "fulfilled");')]),n._v(" "),t("p",[n._v('// è¿‡æ»¤å‡ºå¤±è´¥çš„è¯·æ±‚ï¼Œå¹¶è¾“å‡ºåŸå› \nconst errors = results\n.filter((p) => p.status === "rejected")\n.map((p) => p.reason);\nå¤åˆ¶ä»£ç \nglobalThis\nES2020 ä¹‹å‰è·å–ä¸åŒç¯å¢ƒçš„thiséœ€è¦å¦‚ä¸‹å°è£…\nconst getGlobalThis = () => {\n// åœ¨ webworker æˆ– service worker ä¸­\nif (typeof self !== "undefined") return self;')]),n._v(" "),t("p",[n._v('// åœ¨æµè§ˆå™¨ä¸­\nif (typeof window !== "undefined") return window;')]),n._v(" "),t("p",[n._v('// åœ¨ Node.js ä¸­\nif (typeof global !== "undefined") return global;')]),n._v(" "),t("p",[n._v('// ç‹¬ç«‹çš„ JavaScript shell\nif (typeof this !== "undefined") return this;')]),n._v(" "),t("p",[n._v('throw new Error("Unable to locate global object");\n};\nconst theGlobalThis = getGlobalThis();')]),n._v(" "),t("p",[n._v('if (typeof theGlobalThis.setTimeout !== "function") {\n// æ­¤ç¯å¢ƒä¸­æ²¡æœ‰ setTimeout æ–¹æ³•ï¼\n}\nå¤åˆ¶ä»£ç \nç°åœ¨ï¼ŒglobalThis æä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„æ–¹å¼æ¥è·å–ä¸åŒç¯å¢ƒä¸‹çš„å…¨å±€ this  å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡è‡ªèº«ï¼‰\nif (typeof globalThis.setTimeout !== "function") {\n// æ­¤ç¯å¢ƒä¸­æ²¡æœ‰ setTimeout æ–¹æ³•ï¼\n}\nå¤åˆ¶ä»£ç \nè¯¦ç»†å†…å®¹å‚è€ƒMDN-globalThis\nç©ºä½åˆå¹¶æ“ä½œç¬¦ï¼ˆNullish coalescing Operatorï¼‰\nåœ¨ JS ä¸­ï¼Œ?? è¿ç®—ç¬¦è¢«ç§°ä¸ºéç©ºè¿ç®—ç¬¦ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ null/undefinedï¼ˆè¿™é‡Œåªæœ‰ä¸¤ä¸ªå‡å€¼ï¼Œä½†æ˜¯ JS ä¸­å‡å€¼åŒ…å«ï¼šæœªå®šä¹‰ undefinedã€ç©ºå¯¹è±¡ nullã€æ•°å€¼ 0ã€ç©ºæ•°å­— NaNã€å¸ƒå°” falseï¼Œç©ºå­—ç¬¦ä¸²\'\'ï¼Œä¸è¦ææ··äº†ï¼‰ï¼Œå°†è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°ã€‚æ¯”å¦‚ï¼Œ\nnull ?? 5; // => 5\n3 ?? 5; // => 3\nå¤åˆ¶ä»£ç \nç»™å˜é‡è®¾ç½®é»˜è®¤å€¼æ—¶ï¼Œä»¥å‰å¸¸ç”¨ ||é€»è¾‘æˆ–è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ï¼Œ\nconst prevMoney = 1;\nconst currMoney = 0;\nconst noAccount = null;\nconst futureMoney = -1;\nfunction moneyAmount(money) {\nreturn money || '),t("code",[n._v("è´¦æˆ·æœªå¼€é€š")]),n._v(";\n}\nconsole.log(moneyAmount(prevMoney)); // => 1\nconsole.log(moneyAmount(currMoney)); // => è´¦æˆ·æœªå¼€é€š\nconsole.log(moneyAmount(noAccount)); // => è´¦æˆ·æœªå¼€é€š\nconsole.log(moneyAmount(futureMoney)); // => -1\nå¤åˆ¶ä»£ç \nä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†å‡½æ•° moneyAmountï¼Œå®ƒè¿”å›å½“å‰ç”¨æˆ·ä½™é¢ã€‚æˆ‘ä»¬ä½¿ç”¨ || è¿ç®—ç¬¦æ¥è¯†åˆ«æ²¡æœ‰å¸æˆ·çš„ç”¨æˆ·ã€‚ç„¶è€Œï¼Œå½“ç”¨æˆ·æ²¡æœ‰å¸æˆ·æ—¶ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿå°†æ— è´¦æˆ·è§†ä¸ºç©ºè€Œä¸æ˜¯ 0 æ›´ä¸ºå‡†ç¡®ï¼Œå› ä¸ºé“¶è¡Œè´¦æˆ·å¯èƒ½æ²¡æœ‰ï¼ˆæˆ–è´Ÿï¼‰è´§å¸ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ|| è¿ç®—ç¬¦å°† 0 è§†ä¸ºä¸€ä¸ªè™šå‡å€¼ï¼Œä¸åº”è¯¥åŒ…æ‹¬ç”¨æˆ·æœ‰ 0 ç¾å…ƒçš„å¸æˆ·ã€‚è®©æˆ‘ä»¬ä½¿ç”¨?? éç©ºè¿ç®—ç¬¦æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\nconst currMoney = 0;\nconst noAccount = null;\nfunction moneyAmount(money) {\nreturn money ?? "),t("code",[n._v("è´¦æˆ·æœªå¼€é€š")]),n._v(";\n}\nmoneyAmount(currMoney); // => 0\nmoneyAmount(noAccount); // => "),t("code",[n._v("è´¦æˆ·æœªå¼€é€š")]),n._v('\nå¤åˆ¶ä»£ç \næ¦‚æ‹¬åœ°è¯´ ?? è¿ç®—ç¬¦å…è®¸æˆ‘ä»¬åœ¨å¿½ç•¥é”™è¯¯å€¼ï¼ˆå¦‚ 0 å’Œç©ºå­—ç¬¦ä¸²ï¼‰çš„åŒæ—¶æŒ‡å®šé»˜è®¤å€¼ã€‚\nå¯é€‰é“¾æ“ä½œç¬¦ï¼ˆOptional Chainingï¼‰\n?. ä¹Ÿå«é“¾åˆ¤æ–­è¿ç®—ç¬¦ã€‚å®ƒå…è®¸å¼€å‘äººå‘˜è¯»å–æ·±åº¦åµŒå¥—åœ¨å¯¹è±¡é“¾ä¸­çš„å±æ€§å€¼ï¼Œè€Œä¸å¿…éªŒè¯æ¯ä¸ªå¼•ç”¨ã€‚å½“å¼•ç”¨ä¸ºç©ºæ—¶ï¼Œè¡¨è¾¾å¼åœæ­¢è®¡ç®—å¹¶è¿”å› undefinedã€‚æ¯”å¦‚ï¼š\nvar travelPlans = {\ndestination: "DC",\nmonday: {\nlocation: "National Mall",\nbudget: 200,\n},\n};\nconsole.log(travelPlans.tuesday?.location); // => undefined\nå¤åˆ¶ä»£ç \nç°åœ¨ï¼ŒæŠŠæˆ‘ä»¬åˆšåˆšå­¦åˆ°çš„ç»“åˆèµ·æ¥\nfunction addPlansWhenUndefined(plans, location, budget) {\nif (plans.tuesday?.location == undefined) {\nvar newPlans = {\nplans,\ntuesday: {\nlocation: location ?? "å…¬å›­",\nbudget: budget ?? 200,\n},\n};\n} else {\nnewPlans ??= plans; // åªæœ‰ newPlans æ˜¯ undefined æ—¶ï¼Œæ‰è¦†ç›–\nconsole.log("å·²å®‰æ’è®¡åˆ’");\n}\nreturn newPlans;\n}\n// å¯¹è±¡ travelPlans çš„åˆå§‹å€¼ï¼Œæ¥è‡ªä¸Šé¢ä¸€ä¸ªä¾‹å­\nvar newPlans = addPlansWhenUndefined(travelPlans, "Ford å‰§é™¢", null);\nconsole.log(newPlans);\n// => { plans:\n// { destination: \'DC\',\n// monday: { location: \'å›½å®¶è´­ç‰©ä¸­å¿ƒ\', budget: 200 } },\n// tuesday: { location: \'Ford å‰§é™¢\', budget: 200 } }\nnewPlans = addPlansWhenUndefined(newPlans, null, null);\n// logs => å·²å®‰æ’è®¡åˆ’\n// returns => newPlans object\nå¤åˆ¶ä»£ç \nä¸Šé¢çš„ä¾‹å­åŒ…å«äº†æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€å­¦çš„æ‰€æœ‰è¿ç®—ç¬¦ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†è®¡åˆ’æ·»åŠ åˆ°å½“å‰æ²¡æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡ tuesday.location ä¸­ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨äº†éç©ºè¿ç®—ç¬¦æ¥æä¾›é»˜è®¤å€¼ã€‚æ­¤å‡½æ•°å°†é”™è¯¯åœ°æ¥å—åƒâ€œ0â€è¿™æ ·çš„å€¼ä½œä¸ºæœ‰æ•ˆå‚æ•°ã€‚è¿™æ„å‘³ç€ budget å¯ä»¥è®¾ç½®ä¸ºé›¶ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯ã€‚\nBigInt primitive type\næ—§ç‰ˆæœ¬çš„ JS æ ‡å‡†æœ€å¤§çš„æ•´æ•°åªèƒ½æ˜¯253 - 1ï¼Œ ç°åœ¨ä½¿ç”¨BigInt ç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼Œæ²¡æœ‰ä½æ•°çš„é™åˆ¶ï¼Œä»»ä½•ä½æ•°çš„æ•´æ•°éƒ½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚ è¿™æ˜¯ ECMAScript çš„åˆä¸€ç§æ•°æ®ç±»å‹ã€‚\nå¯ä»¥ç”¨åœ¨ä¸€ä¸ªæ•´æ•°å­—é¢é‡åé¢åŠ  n çš„æ–¹å¼å®šä¹‰ä¸€ä¸ª BigInt ï¼Œå¦‚ï¼š10nï¼Œæˆ–è€…è°ƒç”¨å‡½æ•° BigInt()ã€‚\nconst theBiggestInt = 9007199254740991n;')]),n._v(" "),t("p",[n._v("const alsoHuge = BigInt(9007199254740991);\n// â†ª 9007199254740991n\nå¤åˆ¶ä»£ç ")]),n._v(" "),t("p",[n._v("ES å…¥é—¨-BigInt")]),n._v(" "),t("p",[n._v('ES2019-ES10\nArray#{flat,flatMap}\næ•°ç»„çš„æˆå‘˜æœ‰æ—¶è¿˜æ˜¯æ•°ç»„ï¼ŒArray.prototype.flat()ç”¨äºå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°æ®æ²¡æœ‰å½±å“ã€‚\n[1, 2, [3, 4]].flat();\n// [1, 2, 3, 4]\nå¤åˆ¶ä»£ç \nflatMap()åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„ã€‚\n// ç›¸å½“äº [[[2]], [[4]], [[6]], [[8]]].flat()\n[1, 2, 3, 4].flatMap((x) => [[x * 2]]);\n// [[2], [4], [6], [8]]\nå¤åˆ¶ä»£ç \nè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨-flat\nObject.fromEntries\nObject.fromEntries()æ–¹æ³•æ˜¯Object.entries()çš„é€†æ“ä½œï¼Œç”¨äºå°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬ä¸ºå¯¹è±¡ã€‚\nObject.fromEntries([\n["foo", "bar"],\n["baz", 42],\n]);\n// { foo: "bar", baz: 42 }\nå¤åˆ¶ä»£ç \nè¯¥æ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å°†é”®å€¼å¯¹çš„æ•°æ®ç»“æ„è¿˜åŸä¸ºå¯¹è±¡ï¼Œå› æ­¤ç‰¹åˆ«é€‚åˆå°† Map ç»“æ„è½¬ä¸ºå¯¹è±¡ã€‚\n// ä¾‹ä¸€\nconst entries = new Map([\n["foo", "bar"],\n["baz", 42],\n]);')]),n._v(" "),t("p",[n._v('Object.fromEntries(entries);\n// { foo: "bar", baz: 42 }')]),n._v(" "),t("p",[n._v('// ä¾‹äºŒ\nconst map = new Map().set("foo", true).set("bar", false);\nObject.fromEntries(map);\n// { foo: true, bar: false }\nå¤åˆ¶ä»£ç \nString#{trimStart,trimEnd}\nES2019 å¯¹å­—ç¬¦ä¸²å®ä¾‹æ–°å¢äº†trimStart()å’ŒtrimEnd()è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚å®ƒä»¬çš„è¡Œä¸ºä¸trim()ä¸€è‡´ï¼ŒtrimStart()æ¶ˆé™¤å­—ç¬¦ä¸²å¤´éƒ¨çš„ç©ºæ ¼ï¼ŒtrimEnd()æ¶ˆé™¤å°¾éƒ¨çš„ç©ºæ ¼ã€‚å®ƒä»¬è¿”å›çš„éƒ½æ˜¯æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå§‹å­—ç¬¦ä¸²ã€‚\nconst s = "  abc  ";')]),n._v(" "),t("p",[n._v('s.trim(); // "abc"\ns.trimStart(); // "abc  "\ns.trimEnd(); // "  abc"\nå¤åˆ¶ä»£ç \nSymbol#description\nES2019 æä¾›äº†ä¸€ä¸ªå®ä¾‹å±æ€§descriptionï¼Œç›´æ¥è¿”å› Symbol çš„æè¿°ã€‚\n// åˆ›å»º Symbol çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°ã€‚\nconst sym = Symbol("foo");')]),n._v(" "),t("p",[n._v('sym.description; // "foo"\nå¤åˆ¶ä»£ç \nä¸Šé¢ä»£ç ä¸­ï¼Œsym çš„æè¿°å°±æ˜¯å­—ç¬¦ä¸² fooã€‚\ntry { } catch {} // optional binding\næ—§ç‰ˆæœ¬çš„try / catchè¯­å¥ä¸­çš„catchå­å¥éœ€è¦ä¸€ä¸ªå˜é‡ã€‚ ç°åœ¨å¯ä»¥ä¸åŠ äº†\n// æ—§ç‰ˆæœ¬\ntry {\nconsole.log(a);\n} catch (error) {\nconsole.log("æŠ¥é”™äº†");\n}')]),n._v(" "),t("p",[n._v('// ES2019-SE10\ntry {\nconsole.log(a);\n} catch {\nconsole.log("æŠ¥é”™äº†");\n}\nå¤åˆ¶ä»£ç \nU+2028 å’Œ U+2029\nåœ¨ ES2019 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œä¸æ¥å—ä¸è½¬ä¹‰çš„')]),n._v(" "),t("p",[n._v("è¡Œåˆ†éš”ç¬¦U + 2028\næ®µè½åˆ†éš”ç¬¦U + 2029")]),n._v(" "),t("p",[n._v("ES2019 å…è®¸ JavaScript å­—ç¬¦ä¸²ç›´æ¥è¾“å…¥ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚\n/*\nES2019ä¹‹å‰ï¼Œä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™")]),n._v(" "),t("p",[n._v('ES2019 ä¸‹é¢ä»£ç ä¸ä¼šæŠ¥é”™ã€‚\n*/\nconst PS = eval("\'\\u2029\'");\nå¤åˆ¶ä»£ç \nES å…¥é—¨-U+2028 å’Œ U+2029\nJSON-stringify-çš„æ”¹é€ \nä¸ºäº†ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼ŒES2019 æ”¹å˜äº† JSON.stringify()çš„è¡Œä¸ºã€‚å¦‚æœé‡åˆ° 0xD800 åˆ° 0xDFFF ä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œç•™ç»™åº”ç”¨è‡ªå·±å†³å®šä¸‹ä¸€æ­¥çš„å¤„ç†ã€‚\nJSON.stringify("\\u{D834}"); // ""\\uD834""\nJSON.stringify("\\uDF06\\uD834"); // ""\\udf06\\ud834""\nå¤åˆ¶ä»£ç \nES å…¥é—¨-JSON-stringify-çš„æ”¹é€ \nArray.prototype.sort() çš„ç¨³å®šæ’åº\næ—©å…ˆçš„ ECMAScript æ²¡æœ‰è§„å®šï¼ŒArray.prototype.sort()çš„é»˜è®¤æ’åºç®—æ³•æ˜¯å¦ç¨³å®šï¼Œç•™ç»™æµè§ˆå™¨è‡ªå·±å†³å®šï¼Œè¿™å¯¼è‡´æŸäº›å®ç°æ˜¯ä¸ç¨³å®šçš„ã€‚ES2019 æ˜ç¡®è§„å®šï¼ŒArray.prototype.sort()çš„é»˜è®¤æ’åºç®—æ³•å¿…é¡»ç¨³å®šã€‚è¿™ä¸ªè§„å®šå·²ç»åšåˆ°äº†ï¼Œç°åœ¨ JavaScript å„ä¸ªä¸»è¦å®ç°çš„é»˜è®¤æ’åºç®—æ³•éƒ½æ˜¯ç¨³å®šçš„ã€‚\nconst arr = ["peach", "straw", "apple", "spork"];')]),n._v(" "),t("p",[n._v("const stableSorting = (s1, s2) => {\nif (s1[0] < s2[0]) return -1;\nreturn 1;\n};")]),n._v(" "),t("p",[n._v('arr.sort(stableSorting);\n// ["apple", "peach", "straw", "spork"]\nå¤åˆ¶ä»£ç \nES å…¥é—¨-æ’åºç¨³å®šæ€§\nrevised Function#toString\nES2019 å¯¹å‡½æ•°å®ä¾‹çš„ toString()æ–¹æ³•åšå‡ºäº†ä¿®æ”¹ã€‚\ntoString()æ–¹æ³•è¿”å›å‡½æ•°ä»£ç æœ¬èº«ï¼Œä»¥å‰ä¼šçœç•¥æ³¨é‡Šå’Œç©ºæ ¼ã€‚\nfunction /* foo comment */ foo() {}')]),n._v(" "),t("p",[n._v("// è€ç‰ˆæœ¬\nfoo.toString();\n// function foo() {}")]),n._v(" "),t("p",[n._v('// æ–°ç‰ˆ\nfoo.toString();\n// "function /* foo comment */ foo () {}"\nå¤åˆ¶ä»£ç ')]),n._v(" "),t("p",[n._v('ES2018-ES9\nè§£é™¤æ¨¡æ¿å­—é¢é‡é™åˆ¶(Lifting template literal restriction).\nES2018 æ”¾æ¾äº†å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œé¢çš„å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ã€‚å¦‚æœé‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå°±è¿”å›undefinedï¼Œè€Œä¸æ˜¯æŠ¥é”™ï¼Œå¹¶ä¸”ä»rawå±æ€§ä¸Šé¢å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ã€‚\nfunction tag(strs) {\nstrs[0] === undefined\nstrs.raw[0] === "\\unicode and \\u{55}";\n}\ntag'),t("code",[n._v("\\unicode and \\u{55}")]),n._v("\nå¤åˆ¶ä»£ç \nä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²åŸæœ¬æ˜¯åº”è¯¥æŠ¥é”™çš„ï¼Œä½†æ˜¯ç”±äºæ”¾æ¾äº†å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ï¼Œæ‰€ä»¥ä¸æŠ¥é”™äº†ï¼ŒJavaScript å¼•æ“å°†ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾ç½®ä¸ºundefinedï¼Œä½†æ˜¯rawå±æ€§ä¾ç„¶å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ï¼Œå› æ­¤tagå‡½æ•°è¿˜æ˜¯å¯ä»¥å¯¹åŸå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚")]),n._v(" "),t("p",[n._v("ES å…¥é—¨-æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶\nES å…¥é—¨-row\nES å…¥é—¨-ä¿®é¥°ç¬¦ï¼šu")]),n._v(" "),t("p",[n._v('æ­£åˆ™ä¹‹ s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼-(s (dotAll) flag for regular expressions).\nES2018 å¼•å…¥ s ä¿®é¥°ç¬¦ï¼Œä½¿å¾—.å¯ä»¥åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚\n/foo.bar/s.test("foo\\nbar"); // true\nå¤åˆ¶ä»£ç \nè¿™è¢«ç§°ä¸ºdotAllæ¨¡å¼ï¼Œå³ç‚¹ï¼ˆdotï¼‰ä»£è¡¨ä¸€åˆ‡å­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿˜å¼•å…¥äº†ä¸€ä¸ªdotAllå±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¤„åœ¨dotAllæ¨¡å¼ã€‚\nES å…¥é—¨-ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼\næ­£åˆ™ä¹‹å…·åç»„åŒ¹é…(RegExp named capture groups)\nES2018 å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼ˆNamed Capture Groupsï¼‰ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨ã€‚')]),n._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("RE_DATE")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[n._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[n._v("(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[n._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" matchObj "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("RE_DATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"1999-12-31"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" year "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" matchObj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("groups"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("year"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v('// "1999"')]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" month "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" matchObj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("groups"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("month"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v('// "12"')]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" day "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" matchObj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("groups"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("day"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v('// "31"')]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br")])]),t("p",[n._v('ES å…¥é—¨-ä¿®é¥°ç¬¦ï¼šå…·åç»„åŒ¹é…\nRest/Spread Properties.\nES6 ä¸ºæ•°ç»„å¼•å…¥äº†æ‰©å±•è¿ç®—ç¬¦çš„å†™æ³•ï¼Œ\nåœ¨ ES2018 ä¸­ï¼Œä¸ºå¯¹è±¡ä¹Ÿå¼•å…¥äº†æ­¤å†™æ³•\nconst obj = { a: "a", b: "b", c: "c", d: "d", e: "e" };')]),n._v(" "),t("p",[n._v("// å¯¹è±¡ç»“æ„\nconst { a, b, c, ...rest } = obj;")]),n._v(" "),t("p",[n._v('// ç»„æˆæ–°å¯¹è±¡\nconst newObj = { a, ...rest };\nå¤åˆ¶ä»£ç \næ­£åˆ™ä¹‹åè¡Œæ–­è¨€(RegExp Lookbehind Assertions.)\nES2018 å¼•å…¥åè¡Œæ–­è¨€\nâ€œåè¡Œæ–­è¨€â€æŒ‡: xåªæœ‰ä¸åœ¨yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<!y)x/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç¾å…ƒç¬¦å·åé¢çš„æ•°å­—ï¼Œè¦å†™æˆ/(?<!$)\\d+/ã€‚\n/(?<=$)\\d+/.exec(\'Benjamin Franklin is on the $100 bill\')  // ["100"]\n/(?<!$)\\d+/.exec(\'itâ€™s is worth about â‚¬90\')                // ["90"]\nå¤åˆ¶ä»£ç \nä½¿ç”¨åè¡Œæ–­è¨€è¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢ã€‚\nconst RE_DOLLAR_PREFIX = /(?<=$)foo/g;\n"$foo %foo foo".replace(RE_DOLLAR_PREFIX, "bar");\n// \'$bar %foo foo\'\nå¤åˆ¶ä»£ç \nES å…¥é—¨-åè¡Œæ–­è¨€\nUnicode å±æ€§ç±»(RegExp Unicode Property Escapes)\nES2018 å¼•å…¥äº†ä¸€ç§æ–°çš„ç±»çš„å†™æ³•\\p{...}å’Œ\\P{...}ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆ Unicode æŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦ã€‚\nconst regexGreekSymbol = /\\p{Script=Greek}/u;\nregexGreekSymbol.test("Ï€"); // true')]),n._v(" "),t("p",[n._v("// åŒ¹é…æ‰€æœ‰ç©ºæ ¼\nconst reg = /\\p{White_Space}/;")]),n._v(" "),t("p",[n._v('// åŒ¹é…æ‰€æœ‰çš„ç®­å¤´å­—ç¬¦\nconst regexArrows = /^\\p{Block=Arrows}+$/u;\nregexArrows.test("â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡§â‡©"); // true\nå¤åˆ¶ä»£ç \nES å…¥é—¨-Unicode å±æ€§ç±»\nPromise.prototype.finally.\nfinally()æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚è¯¥æ–¹æ³•æ˜¯ ES2018 å¼•å…¥æ ‡å‡†çš„ã€‚\npromise\n.then(result => {Â·Â·Â·})\n.catch(error => {Â·Â·Â·})\n.finally(() => {Â·Â·Â·});\nå¤åˆ¶ä»£ç \nä¸Šé¢ä»£ç ä¸­ï¼Œä¸ç®¡ promise æœ€åçš„çŠ¶æ€ï¼Œåœ¨æ‰§è¡Œå®Œthenæˆ–catchæŒ‡å®šçš„å›è°ƒå‡½æ•°ä»¥åï¼Œéƒ½ä¼šæ‰§è¡Œfinallyæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚\nES å…¥é—¨-finally\næŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ(Asynchronous Iteration)\nå®é™…å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€ç»„å¼‚æ­¥æ“ä½œï¼Œéœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆã€‚æ¯”å¦‚ï¼Œä¾æ¬¡è¿œç¨‹è¯»å–ä¸€ç»„ URLï¼Œç„¶åæŒ‰ç…§è¯»å–çš„é¡ºåºè¾“å‡ºç»“æœã€‚\nasync function logInOrder(urls) {\n// å¹¶å‘è¯»å–è¿œç¨‹URL\nconst textPromises = urls.map(async (url) => {\nconst response = await fetch(url);\nreturn response.text();\n});')]),n._v(" "),t("p",[n._v('// æŒ‰æ¬¡åºè¾“å‡º\nfor (const textPromise of textPromises) {\nconsole.log(await textPromise);\n}\n}\nå¤åˆ¶ä»£ç \nasync function getData() {\nconst promises = [fetch("url1"), fetch("url2"), fetch("url3"), fetch("url4")];\nfor (const item of promises) {\n// æ‰“å°å‡ºpromise\nconsole.log(item);\n}')]),n._v(" "),t("p",[n._v("for await (const item of promises) {\n// æ‰“å°å‡ºè¯·æ±‚çš„ç»“æœ\nconsole.log(item);\n}\n}\nå¤åˆ¶ä»£ç \nES å…¥é—¨-é¡ºåºå¼‚æ­¥æ“ä½œ")]),n._v(" "),t("p",[n._v('ES2017-ES8\nObject.values/Object.entries\nObject.values æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼ã€‚\nconst obj = { foo: "bar", baz: 42 };\nObject.values(obj);\n// ["bar", 42]')]),n._v(" "),t("p",[n._v('const obj = { 100: "a", 2: "b", 7: "c" };\nObject.values(obj);\n// ["b", "c", "a"]\nå¤åˆ¶ä»£ç \nObject.entriesæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ã€‚\nconst obj = { foo: "bar", baz: 42 };\nObject.entries(obj);\n// [ ["foo", "bar"], ["baz", 42] ]\nå¤åˆ¶ä»£ç \nObject.entries çš„åŸºæœ¬ç”¨é€”æ˜¯éå†å¯¹è±¡çš„å±æ€§ã€‚\nlet obj = { one: 1, two: 2 };\nfor (let [k, v] of Object.entries(obj)) {\nconsole.log('),t("code",[n._v("${JSON.stringify(k)}: ${JSON.stringify(v)}")]),n._v(');\n}\n// "one": 1\n// "two": 2\nå¤åˆ¶ä»£ç \nObject.entries æ–¹æ³•çš„å¦ä¸€ä¸ªç”¨å¤„æ˜¯ï¼Œå°†å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„ Map ç»“æ„ã€‚\nconst obj = { foo: "bar", baz: 42 };\nconst map = new Map(Object.entries(obj));\nmap; // Map { foo: "bar", baz: 42 }\nå¤åˆ¶ä»£ç \nString padding\nES2017 å¼•å…¥äº†å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ã€‚å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ã€‚padStart()ç”¨äºå¤´éƒ¨è¡¥å…¨ï¼ŒpadEnd()ç”¨äºå°¾éƒ¨è¡¥å…¨ã€‚\n"x".padStart(5, "ab"); // \'ababx\'\n"x".padStart(4, "ab"); // \'abax\'')]),n._v(" "),t("p",[n._v('"x".padEnd(5, "ab"); // \'xabab\'\n"x".padEnd(4, "ab"); // \'xaba\'\nå¤åˆ¶ä»£ç \npadStart()çš„å¸¸è§ç”¨é€”æ˜¯ä¸ºæ•°å€¼è¡¥å…¨æŒ‡å®šä½æ•°ã€‚ä¸‹é¢ä»£ç ç”Ÿæˆ 10 ä½çš„æ•°å€¼å­—ç¬¦ä¸²ã€‚\n"1".padStart(10, "0"); // "0000000001"\n"12".padStart(10, "0"); // "0000000012"\n"123456".padStart(10, "0"); // "0000123456"\nå¤åˆ¶ä»£ç \nå¦ä¸€ä¸ªç”¨é€”æ˜¯æç¤ºå­—ç¬¦ä¸²æ ¼å¼ã€‚\n"12".padStart(10, "YYYY-MM-DD"); // "YYYY-MM-12"\n"09-12".padStart(10, "YYYY-MM-DD"); // "YYYY-09-12"\nå¤åˆ¶ä»£ç \nObject.getOwnPropertyDescriptors\nES2017 å¼•å…¥äº† Object.getOwnPropertyDescriptors()æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§ï¼ˆéç»§æ‰¿å±æ€§ï¼‰çš„æè¿°å¯¹è±¡ã€‚')]),n._v(" "),t("p",[n._v("value â€” å±æ€§å®é™…çš„å€¼\nwritable â€” å±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹\nget â€” è·å–å‡½æ•°ï¼Œåœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨\nset â€” è®¾ç½®å‡½æ•°ï¼Œåœ¨å†™å…¥å±æ€§æ—¶è°ƒç”¨\nconfigurable â€” å±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡ delete åˆ é™¤å¹¶é‡æ–°å®šä¹‰ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹å®ƒçš„ç‰¹ æ€§ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥æŠŠå®ƒæ”¹ä¸ºè®¿é—®å™¨å±æ€§\nenumerable â€” å±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡ for-in å¾ªç¯è¿”å›")]),n._v(" "),t("p",[n._v('const obj = {\nfoo: 123,\nget bar() {\nreturn "abc";\n},\n};')]),n._v(" "),t("p",[n._v("Object.getOwnPropertyDescriptors(obj);\n// { foo:\n//    { value: 123,\n//      writable: true,\n//      enumerable: true,\n//      configurable: true },\n//   bar:\n//    { get: [Function: get bar],\n//      set: undefined,\n//      enumerable: true,\n//      configurable: true } }\nå¤åˆ¶ä»£ç \nè¯¥æ–¹æ³•çš„å¼•å…¥ç›®çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³ Object.assign()æ— æ³•æ­£ç¡®æ‹·è´ get å±æ€§å’Œ set å±æ€§çš„é—®é¢˜ã€‚\nObject.getOwnPropertyDescriptors()æ–¹æ³•çš„å¦ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯é…åˆ Object.create()æ–¹æ³•ï¼Œå°†å¯¹è±¡å±æ€§å…‹éš†åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ã€‚è¿™å±äºæµ…æ‹·è´ã€‚\nconst shallowClone = (obj) =>\nObject.create(\nObject.getPrototypeOf(obj),\nObject.getOwnPropertyDescriptors(obj),\n);\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-getOwnPropertyDescriptors\nå‡½æ•°å‚æ•°çš„å°¾é€—å·\nES2017 å…è®¸å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æœ‰å°¾é€—å·ï¼ˆtrailing commaï¼‰ã€‚\næ­¤å‰ï¼Œå‡½æ•°å®šä¹‰å’Œè°ƒç”¨æ—¶ï¼Œéƒ½ä¸å…è®¸æœ€åä¸€ä¸ªå‚æ•°åé¢å‡ºç°é€—å·ã€‚\nfunction clownsEverywhere(param1, param2,) {\n/* ... */\n}")]),n._v(" "),t("p",[n._v('clownsEverywhere("foo", "bar",);\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-å‡½æ•°å‚æ•°çš„å°¾é€—å·\nå¼‚æ­¥å‡½æ•°(Async functions)\nES2017 æ ‡å‡†å¼•å…¥äº† async å‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚\nasync å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ï¼Œå®ƒå°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚\nfunction fakeRequest() {\nreturn new Promise((resolve, reject) => {\nsetTimeout(() => {\nresolve("è¯·æ±‚æˆåŠŸ");\n}, 2000);\n});\n}')]),n._v(" "),t("p",[n._v('async function getData() {\nconsole.log("start");\nconst res = await fakeRequest();\nconsole.log(res);\nconsole.log("end");\n}\ngetData();\n/*\n1.start\n2.è¯·æ±‚æˆåŠŸ\n3.end\n*/\nå¤åˆ¶ä»£ç \nä½¿ç”¨ Atomics å…±äº«å†…å­˜\nAtomics å¯¹è±¡æä¾›äº†ä¸€ç»„é™æ€æ–¹æ³•å¯¹ SharedArrayBuffer å’Œ ArrayBuffer å¯¹è±¡è¿›è¡ŒåŸå­æ“ä½œã€‚\næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒMDN-Atomics')]),n._v(" "),t("p",[n._v("ES2016-ES7\nArray.prototype.includes\nArray.prototype.includesæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„includesæ–¹æ³•ç±»ä¼¼ã€‚\n[1, 2, 3]\n.includes(2) // true\n[(1, 2, 3)].includes(4) // false\n[(1, 2, NaN)].includes(NaN); // true\nå¤åˆ¶ä»£ç \næ±‚å¹‚è¿ç®—ç¬¦(Exponentiation operator)\n// 2çš„å¹³æ–¹\n2 ** 2; // 4\n// 2çš„ä¸‰æ¬¡æ–¹\n2 ** 3; // 8\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-æŒ‡æ•°è¿ç®—ç¬¦")]),n._v(" "),t("p",[n._v("ES2015-ES6\næ¨èé˜®ä¸€å³°å¤§ä½¬çš„ES å…¥é—¨æ•™ç¨‹,ä¸­æ–‡æ–‡æ¡£æ²¡æœ‰æ¯”ä»–æ›´è¯¦ç»†çš„äº†\nç®­å¤´å‡½æ•°(arrows)\nç®­å¤´å‡½æ•°æ˜¯ä½¿ç”¨=>è¯­æ³•çš„å‡½æ•°ç®€å†™ã€‚ä¸ä¸€èˆ¬å‡½æ•°ä¸åŒçš„æ˜¯")]),n._v(" "),t("p",[n._v("å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚")]),n._v(" "),t("p",[n._v("this å¯¹è±¡çš„æŒ‡å‘æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå®ƒæ˜¯å›ºå®šçš„ã€‚")]),n._v(" "),t("p",[n._v("ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚\nä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ã€‚\nä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°ã€‚")]),n._v(" "),t("p",[n._v("var f = (v) => v;")]),n._v(" "),t("p",[n._v("// ç­‰åŒäº\nvar f = function (v) {\nreturn v;\n};")]),n._v(" "),t("p",[n._v('function foo() {\nsetTimeout(() => {\nconsole.log("id:", this.id);\n}, 100);\n}')]),n._v(" "),t("p",[n._v("var id = 21;\n// ç®­å¤´å‡½æ•°å¯¼è‡´thisæ€»æ˜¯æŒ‡å‘å‡½æ•°å®šä¹‰ç”Ÿæ•ˆæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼ˆ{id: 42}ï¼‰ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯42\nfoo.call({ id: 42 });\n// id: 42")]),n._v(" "),t("p",[n._v("// å¯¹è±¡ä¸æ„æˆå•ç‹¬çš„ä½œç”¨åŸŸ,ä½¿å¾—thisæŒ‡å‘å…¨å±€å¯¹è±¡\nglobalThis.s = 21;\nconst obj = {\ns: 42,\nm: () => console.log(this.s),\n};")]),n._v(" "),t("p",[n._v("obj.m(); // 21\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-ç®­å¤´å‡½æ•°\nç±»(Class)\n// ES5\nfunction Point(x, y) {\nthis.x = x;\nthis.y = y;\n}")]),n._v(" "),t("p",[n._v('Point.prototype.toString = function () {\nreturn "(" + this.x + ", " + this.y + ")";\n};')]),n._v(" "),t("p",[n._v("var p = new Point(1, 2);")]),n._v(" "),t("p",[n._v("// ES6\nclass Point {\nconstructor(x, y) {\nthis.x = x;\nthis.y = y;\n}")]),n._v(" "),t("p",[n._v('toString() {\nreturn "(" + this.x + ", " + this.y + ")";\n}\n}\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-Class\nå¯¹è±¡çš„æ‰©å±•(enhanced object literals)\nå¯¹è±¡çš„å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•\nconst foo = "bar";\nconst method = function () {\nreturn "Hello!";\n};')]),n._v(" "),t("p",[n._v('const filed = "name";')]),n._v(" "),t("p",[n._v('const baz = {\nfoo,\nmethod,\n[filed]: "å°ç‹",\n};')]),n._v(" "),t("p",[n._v('// ç­‰åŒäº\nconst baz = {\nfoo: foo,\nmethod: function () {\nreturn "Hello!";\n},\nname: "å°ç‹",\n};\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-å¯¹è±¡æ‰©å±•\næ¨¡æ¿å­—ç¬¦ä¸²\n// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡\nlet name = "Bob",\ntime = "today";\n'),t("code",[n._v("Hello ${name}, how are you ${time}?")]),n._v(";\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-å­—ç¬¦ä¸²æ¨¡æ¿\næ•°ç»„è§£æ„+æ‰©å±•è¿ç®—ç¬¦\nvar [a] = [];")]),n._v(" "),t("p",[n._v("a === undefined; // true")]),n._v(" "),t("p",[n._v('var [a = 1] = [];\na === 1; // true\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦\nå‡½æ•°é»˜è®¤å‚æ•°+å‰©ä½™å‚æ•°+æ‰©å±•è¿ç®—ç¬¦\n//å¦‚æœæ²¡æœ‰ä¼ é€’y æˆ–è€…y===undefined ï¼Œåˆ™y=12\nfunction f(x, y = 12) {\nreturn x + y;\n}\nf(3) == 15;\nå¤åˆ¶ä»£ç \nfunction f(x, ...y) {\n// y æ˜¯ä¸€ä¸ªæ•°ç»„\nreturn x * y.length;\n}\nf(3, "hello", true) == 6;\nå¤åˆ¶ä»£ç \nfunction f(x, y, z) {\nreturn x + y + z;\n}\n// Pass each elem of array as argument\nf(...[1, 2, 3]) == 6;\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-å‡½æ•°é»˜è®¤å‚æ•°\nå—çº§ä½œç”¨åŸŸå˜é‡\néšç€ ES6 ä¸­å¼•å…¥ let/const å…³é”®å­—ï¼ŒJS æ‰å…·æœ‰å‡½æ•°ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸï¼Œç°åœ¨ JS ä¹Ÿå¯ä»¥æœ‰å—çº§ä½œç”¨åŸŸäº†ã€‚\nfunction f() {\n{\nlet x;\n{\n// æ­£å¸¸ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªæ–°çš„å—çº§ä½œç”¨åŸŸä¸­\nconst x = "sneaky";\n// const å®šä¹‰çš„æ˜¯å¸¸é‡æ— æ³•è¢«ä¿®æ”¹ï¼Œå› æ­¤ä¼šæŠ¥é”™\nx = "foo";\n}\n// åœ¨å—çº§ä½œç”¨åŸŸä¸­å·²å£°æ˜x,å› æ­¤ä¼šæŠ¥é”™\nlet x = "inner";\n}\n}\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-unicode\néå†/è¿­ä»£å™¨+for..of(iterators + for..of)\nä¸€ä¸ªæ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº† Symbol.iterator å±æ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰ iterator æ¥å£ï¼Œå°±å¯ä»¥ç”¨ for...of å¾ªç¯éå†å®ƒçš„æˆå‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œfor...of å¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„ Symbol.iterator æ–¹æ³•ã€‚\nfor ... ofæ˜¯for ... inå’ŒforEach()çš„æ›¿ä»£æ–¹æ³•ï¼Œå®ƒå¾ªç¯è®¿é—®å¯è¿­ä»£çš„æ•°æ®ç»“æ„ï¼Œå¦‚æ•°ç»„ï¼Œæ˜ å°„ï¼Œé›†åˆå’Œå­—ç¬¦ä¸²ã€‚\nJavaScript åŸæœ‰çš„ for...in å¾ªç¯ï¼Œåªèƒ½è·å¾—å¯¹è±¡çš„é”®åï¼Œä¸èƒ½ç›´æ¥è·å–é”®å€¼ã€‚ES6 æä¾› for...of å¾ªç¯ï¼Œå…è®¸éå†è·å¾—é”®å€¼ã€‚\nvar arr = ["a", "b", "c", "d"];')]),n._v(" "),t("p",[n._v("for (let a in arr) {\nconsole.log(a); // 0 1 2 3\n}")]),n._v(" "),t("p",[n._v("for (let a of arr) {\nconsole.log(a); // a b c d\n}")]),n._v(" "),t("p",[n._v('const str = "helloworld";\nfor (let a of str) {\nconsole.log(a); // h e l l o w o r l d\n}\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-iterators\nç”Ÿæˆå™¨(generators)\nGenerators ä½¿ç”¨function *å’Œyieldç®€åŒ–äº†è¿­ä»£å™¨çš„åˆ›å»ºã€‚ å£°æ˜ä¸ºfunction '),t("em",[n._v("çš„å‡½æ•°ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå† Generator å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚\nç”Ÿæˆå™¨æ˜¯è¿­ä»£å™¨çš„å­ç±»å‹ï¼Œå› æ­¤å…·æœ‰nextå’Œthrowæ–¹æ³•ã€‚\nyieldè¡¨è¾¾å¼æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œè€Œnextæ–¹æ³•å¯ä»¥æ¢å¤æ‰§è¡Œ\næ³¨æ„ï¼šES7 å‡ºç°å,æ¨èä½¿ç”¨awaitã€‚\nfunction")]),n._v(" foo() {\nyield 1;\nyield 2;\nyield 3;\nyield 4;\nyield 5;\nreturn 6;\n}")]),n._v(" "),t("p",[n._v("for (let v of foo()) {\nconsole.log(v);\n}\n// 1 2 3 4 5\nå¤åˆ¶ä»£ç \nä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨ Generator å‡½æ•°å’Œfor...ofå¾ªç¯ï¼Œå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ã€‚\nvar fibonacci = {\n[Symbol.iterator]: function* () {\nlet [prev, curr] = [0, 1];\nfor (;ğŸ˜‰ {\nyield curr;\n[prev, curr] = [curr, prev + curr];\n}\n},\n};")]),n._v(" "),t("p",[n._v("for (var n of fibonacci) {\n//\nif (n > 1000) break;\nconsole.log(n);\n}\nå¤åˆ¶ä»£ç \nä»ä¸Šé¢ä»£ç å¯è§ï¼Œä½¿ç”¨for...ofè¯­å¥æ—¶ä¸éœ€è¦ä½¿ç”¨nextæ–¹æ³•ã€‚\nåˆ©ç”¨for...ofå¾ªç¯ï¼Œå¯ä»¥å†™å‡ºéå†ä»»æ„å¯¹è±¡ï¼ˆobjectï¼‰çš„æ–¹æ³•ã€‚åŸç”Ÿçš„ JavaScript å¯¹è±¡æ²¡æœ‰è¿­ä»£å™¨æ¥å£ï¼Œæ— æ³•ä½¿ç”¨for...ofå¾ªç¯ï¼Œé€šè¿‡ Generator å‡½æ•°ä¸ºå®ƒåŠ ä¸Šè¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥ç”¨äº†ã€‚\nç”Ÿæˆå™¨(Generator) å®è´¨ä¸Šç»§æ‰¿äº†è¿­ä»£å™¨(Iterator)\ninterface Generator extends Iterator {\nnext(value?: any): IteratorResult;\nthrow(exception: any);\n}\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-iterators\nUnicode\nES6 å¢å¼ºäº† Unicode çš„åŠŸèƒ½,åŒ…æ‹¬")]),n._v(" "),t("p",[n._v("æ”¯æŒå­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•")]),n._v(" "),t("p",[n._v('ä¸¾ä¾‹æ¥è¯´ï¼Œâ€œä¸­â€çš„ Unicode ç ç‚¹æ˜¯ U+4e2dï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å­—ç¬¦ä¸²é‡Œé¢è¾“å…¥è¿™ä¸ªæ±‰å­—ï¼Œä¹Ÿå¯ä»¥è¾“å…¥å®ƒçš„è½¬ä¹‰å½¢å¼\\u4e2dï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ã€‚\n"ä¸­" === "\\u4e2d"; // true\nå¤åˆ¶ä»£ç ')]),n._v(" "),t("p",[n._v("ä½¿ç”¨/uåŒ¹é…ç ç‚¹çš„æ­£åˆ™è¡¨è¾¾å¼")]),n._v(" "),t("p",[n._v('// new RegExp behaviour, opt-in â€˜uâ€™\n"ğ ®·".match(/./u)[0].length == 2;\nå¤åˆ¶ä»£ç ')]),n._v(" "),t("p",[n._v("è·å– 32 ä½çš„ UTF-16 å­—ç¬¦çš„ç ç‚¹-codePointAt")]),n._v(" "),t("p",[n._v('"ğ ®·".codePointAt(0) == 0x20bb7;')]),n._v(" "),t("p",[n._v('let s = "ğ ®·a";\nfor (let ch of s) {\nconsole.log(ch.codePointAt(0).toString(16));\n}\n// 20bb7\n// 61\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-unicode\næ¨¡å—åŒ–(modules)\nES6 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œå®Œå…¨å¯ä»¥å–ä»£ CommonJS å’Œ AMD è§„èŒƒï¼Œæˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚\nä½¿ç”¨ export default æˆ– export è¿›è¡Œå¯¼å‡º\n// math.js\nexport const pi = 3.141593;')]),n._v(" "),t("p",[n._v('export default function sum(x, y) {\nreturn x + y;\n}\nå¤åˆ¶ä»£ç \nä½¿ç”¨ import è¿›è¡Œå¯¼å…¥\n// app.js\nimport sum, { pi } from "./math";')]),n._v(" "),t("p",[n._v('alert("2Ï€ = " + sum(pi, pi));\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-module\næ¨¡å—åŠ è½½å™¨è§„åˆ™(module loaders)\næ¨¡å—åŠ è½½å™¨æ”¯æŒ:')]),n._v(" "),t("p",[n._v("å¼‚æ­¥åŠ è½½\nä»£ç æ˜¯åœ¨æ¨¡å—ä½œç”¨åŸŸä¹‹ä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¿è¡Œã€‚æ¨¡å—å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è§ã€‚\næ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„ this å…³é”®å­—è¿”å› undefinedï¼Œè€Œä¸æ˜¯æŒ‡å‘ windowã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨ this å…³é”®å­—ï¼Œæ˜¯æ— æ„ä¹‰çš„")]),n._v(" "),t("p",[n._v("//index.js\nconst x = 1;")]),n._v(" "),t("p",[n._v('console.log(x === window.x); //false\nconsole.log(this === undefined); // true\nå¤åˆ¶ä»£ç \nåˆ©ç”¨é¡¶å±‚çš„ this ç­‰äº undefined è¿™ä¸ªè¯­æ³•ç‚¹ï¼Œå¯ä»¥ä¾¦æµ‹å½“å‰ä»£ç æ˜¯å¦åœ¨ ES6 æ¨¡å—ä¹‹ä¸­ã€‚\nconst isNotModuleScript = this !== undefined;\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-module-loader\nimport and export\nMap + Set + Weakmap + Weakset\nES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚\n// Sets\nvar s = new Set();\ns.add("hello").add("goodbye").add("hello");\ns.size === 2;\ns.has("hello") === true;\nå¤åˆ¶ä»£ç \nES6 æä¾›äº† Map æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObject ç»“æ„æä¾›äº†â€œå­—ç¬¦ä¸²â€”å€¼â€çš„å¯¹åº”ï¼ŒMap ç»“æ„æä¾›äº†â€œå€¼â€”å€¼â€çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„ Hash ç»“æ„å®ç°ã€‚å¦‚æœä½ éœ€è¦â€œé”®å€¼å¯¹â€çš„æ•°æ®ç»“æ„ï¼ŒMap æ¯” Object æ›´åˆé€‚ã€‚\n// Maps\nvar m = new Map();\nm.set("hello", 42);\nm.set(s, 34);\nm.get(s) == 34;\nå¤åˆ¶ä»£ç \nWeakMap ç»“æ„ä¸ Map ç»“æ„ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨äºç”Ÿæˆé”®å€¼å¯¹çš„é›†åˆã€‚\nWeakMap ä¸ Map çš„åŒºåˆ«æœ‰ä¸¤ç‚¹ã€‚')]),n._v(" "),t("p",[n._v("WeakMap åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnull é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚\nWeakMap çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚")]),n._v(" "),t("p",[n._v("// Weak Maps\nvar wm = new WeakMap();\nwm.set(s, { extra: 42 });\nwm.size === undefined;\nå¤åˆ¶ä»£ç \nWeakSet ç»“æ„ä¸ Set ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸ Set æœ‰ä¸¤ä¸ªåŒºåˆ«ã€‚")]),n._v(" "),t("p",[n._v("WeakSet çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚\nWeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨")]),n._v(" "),t("p",[n._v("// Weak Sets\nvar ws = new WeakSet();\nws.add({ data: 42 });\n// Because the added object has no other references, it will not be held in the set\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-Set å’Œ Map\nä»£ç†(proxies)\nProxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ã€‚ å¯ä»¥ç”¨äºæ“ä½œæ‹¦æˆªï¼Œæ—¥å¿—è®°å½•/åˆ†æç­‰ã€‚\n// ä»£ç†ä¸€ä¸ªæ™®é€šå¯¹è±¡\nvar target = {};\nvar handler = {\nget: function (receiver, name) {\nreturn "),t("code",[n._v("Hello, ${name}!")]),n._v(";\n},\n};")]),n._v(" "),t("p",[n._v("var p = new Proxy(target, handler);")]),n._v(" "),t("p",[n._v('// true\np.world === "Hello, world!";\nå¤åˆ¶ä»£ç \nä¸‹é¢æ˜¯ Proxy æ‰€æœ‰å¯ä»¥ä»£ç†çš„"å…ƒæ“ä½œ"\nvar handler =\n{\nget:...,\nset:...,\nhas:...,\ndeleteProperty:...,\napply:...,\nconstruct:...,\ngetOwnPropertyDescriptor:...,\ndefineProperty:...,\ngetPrototypeOf:...,\nsetPrototypeOf:...,\nenumerate:...,\nownKeys:...,\npreventExtensions:...,\nisExtensible:...\n}\nå¤åˆ¶ä»£ç \nMDN-handler.get()\n// ä»£ç†ä¸€ä¸ªå‡½æ•°å¯¹è±¡\nvar target = function () {\nreturn "I am the target";\n};\nvar handler = {\napply: function (receiver, ...args) {\nreturn "I am the proxy";\n},\n};')]),n._v(" "),t("p",[n._v('var p = new Proxy(target, handler);\n//true\np() === "I am the proxy";\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-proxy\nsymbols\nES6 å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹ Symbolï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼\nSymbol å€¼é€šè¿‡ Symbol å‡½æ•°ç”Ÿæˆã€‚è¿™å°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„å±æ€§åç°åœ¨å¯ä»¥æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯åŸæ¥å°±æœ‰çš„å­—ç¬¦ä¸²ï¼Œå¦ä¸€ç§å°±æ˜¯æ–°å¢çš„ Symbol ç±»å‹ã€‚å‡¡æ˜¯å±æ€§åå±äº Symbol ç±»å‹ï¼Œå°±éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¯ä»¥ä¿è¯ä¸ä¼šä¸å…¶ä»–å±æ€§åäº§ç”Ÿå†²çªã€‚\nvar MyClass = (function () {\n//\nvar key = Symbol("key");')]),n._v(" "),t("p",[n._v("function MyClass(privateData) {\nthis[key] = privateData;\n}")]),n._v(" "),t("p",[n._v("MyClass.prototype = {\ndoStuff: function () {\nthis[key];\n},\n};")]),n._v(" "),t("p",[n._v("return MyClass;\n})();")]),n._v(" "),t("p",[n._v('var c = new MyClass("hello");\n// true\nconsole.log(c["key"] === undefined);\nå¤åˆ¶ä»£ç \nåˆ›å»º Symbol çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°ã€‚\nconst sym = Symbol("foo");\nå¤åˆ¶ä»£ç \nä¸Šé¢ä»£ç ä¸­ï¼Œsym çš„æè¿°å°±æ˜¯å­—ç¬¦ä¸² fooã€‚\nSymbol ä½œä¸ºå±æ€§åï¼Œéå†å¯¹è±¡çš„æ—¶å€™ï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨ for...inã€for...of å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢« Object.keys()ã€Object.getOwnPropertyNames()ã€JSON.stringify()è¿”å›ã€‚\nä½†æ˜¯ï¼Œå®ƒä¹Ÿä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæœ‰ä¸€ä¸ª Object.getOwnPropertySymbols()æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§åã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚\nconst obj = {};\nlet a = Symbol("a");\nlet b = Symbol("b");')]),n._v(" "),t("p",[n._v('obj[a] = "Hello";\nobj[b] = "World";')]),n._v(" "),t("p",[n._v("const objectSymbols = Object.getOwnPropertySymbols(obj);")]),n._v(" "),t("p",[n._v("objectSymbols;\n// [Symbol(a), Symbol(b)]\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-symbol\næœŸçº¦(promises)\nPromise æ˜¯ä¸€ä¸ªç”¨äºå¼‚æ­¥ç¼–ç¨‹çš„åº“,é‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ è®¸å¤šç°æœ‰çš„ JavaScript åº“å·²ç»ä½¿ç”¨äº† Promiseã€‚\nfunction timeout(duration = 0) {\nreturn new Promise((resolve, reject) => {\nsetTimeout(resolve, duration);\n});\n}")]),n._v(" "),t("p",[n._v('var p = timeout(1000)\n.then(() => {\nreturn timeout(2000);\n})\n.then(() => {\nthrow new Error("hmm");\n})\n.catch((err) => {\nreturn Promise.all([timeout(100), timeout(200)]);\n});\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-promise\nmath + number + string + array + object APIs\næ·»åŠ äº†è®¸å¤šç±»å‹çš„æ‰©å±•æ–¹æ³•,åŒ…æ‹¬:Math ,Array ,String ,Object\nNumber.EPSILON;\nNumber.isInteger(Infinity); // false\nNumber.isNaN("NaN"); // false')]),n._v(" "),t("p",[n._v("Math.acosh(3); // 1.762747174039086\nMath.hypot(3, 4); // 5\nMath.imul(Math.pow(2, 32) - 1, Math.pow(2, 32) - 2); // 2")]),n._v(" "),t("p",[n._v('"abcde".includes("cd"); // true\n"abc".repeat(3); // "abcabcabc"')]),n._v(" "),t("p",[n._v('Array.from(document.querySelectorAll("*")); // Returns a real Array\nArray.of(1, 2, 3) // Similar to new Array(...), but without special one-arg behavior\n[(0, 0, 0)].fill(7, 1) // [0,7,7]\n[(1, 2, 3)].find((x) => x == 3) // 3\n[(1, 2, 3)].findIndex((x) => x == 2) // 1\n[(1, 2, 3, 4, 5)].copyWithin(3, 0) // [1, 2, 3, 1, 2]\n[("a", "b", "c")].entries() // iterator [0, "a"], [1,"b"], [2,"c"]\n[("a", "b", "c")].keys() // iterator 0, 1, 2\n[("a", "b", "c")].values(); // iterator "a", "b", "c"')]),n._v(" "),t("p",[n._v("Object.assign(Point, { origin: new Point(0, 0) });\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒ ES å…¥é—¨æ•™ç¨‹:")]),n._v(" "),t("p",[n._v("Number\nMath,\nArray.from\nArray.of\nArray.prototype.copyWithin\nObject.assign")]),n._v(" "),t("p",[n._v("äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶(binary and octal literals)\nä¸¤ç§æ–°çš„æ•°å­—è¡¨ç¤ºå½¢å¼ã€‚")]),n._v(" "),t("p",[n._v("äºŒè¿›åˆ¶: 0b å¼€å¤´\nå…«è¿›åˆ¶: 0o å¼€å¤´")]),n._v(" "),t("p",[n._v('0b111110111 === 503; // true\n0o767 === 503; // true\nå¤åˆ¶ä»£ç \nreflect api\nreflect API å…¬å¼€å¯¹è±¡ä¸Šçš„è¿è¡Œæ—¶çº§åˆ«çš„å…ƒæ“ä½œã€‚\næœ€é‡è¦çš„ç›®çš„æ˜¯é…åˆ Proxy ä½¿ç”¨ï¼Œæ‰§è¡ŒåŸç”Ÿè¡Œä¸º\nè®©Objectæ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›Objectæ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚name in objå’Œdelete obj[name]ï¼Œè€ŒReflect.has(obj, name)å’ŒReflect.deleteProperty(obj, name)è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚\n// è€å†™æ³•\n"assign" in Object; // true')]),n._v(" "),t("p",[n._v('// æ–°å†™æ³•\nReflect.has(Object, "assign"); // true\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-reflect\nå°¾è°ƒç”¨(tail calls)')]),n._v(" "),t("p",[n._v("å°¾è°ƒç”¨:æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è¿”å›å¹¶è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°\nå°¾é€’å½’:å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚\nå°¾è°ƒç”¨ä¼˜åŒ–")]),n._v(" "),t("p",[n._v("æ³¨æ„ï¼Œç›®å‰åªæœ‰ Safari æµè§ˆå™¨æ”¯æŒå°¾è°ƒç”¨ä¼˜åŒ–ï¼ŒChrome å’Œ Firefox éƒ½ä¸æ”¯æŒã€‚è¿™é‡Œå°±ä¸æ·±å…¥ç ”ç©¶äº† ğŸ˜\nfunction factorial(n, acc = 1) {\nif (n <= 1) return acc;\nreturn factorial(n - 1, n * acc);\n}")]),n._v(" "),t("p",[n._v("// å¤§å¤šæ•°æµè§ˆå™¨ä¸­éƒ½ä¼šå‡ºç° å †æ ˆæº¢å‡º çš„é”™è¯¯,\n// ä½†æ˜¯åœ¨ ES6çš„Safariä¸­æ˜¯å®‰å…¨çš„\nfactorial(100000);\nå¤åˆ¶ä»£ç \næ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒES å…¥é—¨æ•™ç¨‹-å°¾è°ƒç”¨\né€šè¿‡ Intl API å¯¹å­—ç¬¦ä¸²ï¼Œæ•°å­—å’Œæ—¥æœŸè¿›è¡Œå›½é™…åŒ–\nIntl å¯¹è±¡æ˜¯ ECMAScript å›½é™…åŒ– API çš„å‘½åç©ºé—´ï¼Œå®ƒæä¾›å¯¹è¯­è¨€æ•æ„Ÿçš„å­—ç¬¦ä¸²æ¯”è¾ƒã€æ”¯æŒæ•°å­—æ ¼å¼åŒ–ä»¥åŠæ—¥æœŸå’Œæ—¶é—´çš„æ ¼å¼åŒ–ã€‚\nIntl.Collator å¯¹è±¡\ncollator è¿™ä¸ªå•è¯æ„æ€æ˜¯æ’åºå™¨ã€‚Intl.Collator å¯¹è±¡æ˜¯æ’åºå™¨çš„æ„é€ å‡½æ•°ï¼Œå¯ä»¥æ”¯æŒå¯¹è¯­è¨€æ•æ„Ÿçš„å­—ç¬¦ä¸²æ¯”è¾ƒã€‚")]),n._v(" "),t("p",[n._v("ä¸­æ–‡æ’åº")]),n._v(" "),t("p",[n._v('å¦‚æœæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ä¸­æ–‡æŒ‰ç…§é¦–å­—æ¯æ‹¼éŸ³æ’åºï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ\næ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸­æ–‡ç®€ä½“çš„ BCF 47 è¯­è¨€æ ‡è®°å­—ç¬¦ä¸² zh è¿›è¡Œæ’åºï¼Œä»£ç å¦‚ä¸‹ï¼š\nvar arrUsername = [\n"é™ˆå¤",\n"é‚“è¶…",\n"æœæ·³",\n"å†¯ç»å³°",\n"éŸ©åºš",\n"èƒ¡æ­Œ",\n"é»„æ™“æ˜",\n"è´¾ä¹ƒäº®",\n"ææ™¨",\n"ææ˜“å³°",\n"é¹¿æ™—",\n"äº•æŸç„¶",\n"åˆ˜çƒ¨",\n"é™†æ¯…",\n"å­™çº¢é›·",\n];')]),n._v(" "),t("p",[n._v('arrUsername.sort(new Intl.Collator("zh").compare);\n// ç»“æœæ˜¯ï¼š["é™ˆå¤", "é‚“è¶…", "æœæ·³", "å†¯ç»å³°", "éŸ©åºš", "èƒ¡æ­Œ", "é»„æ™“æ˜", "è´¾ä¹ƒäº®", "äº•æŸç„¶", "ææ™¨", "ææ˜“å³°", "åˆ˜çƒ¨", "é™†æ¯…", "é¹¿æ™—", "å­™çº¢é›·"]\nå¤åˆ¶ä»£ç \nIntl APIè¯¦ç»†å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« JS Intl å¯¹è±¡å®Œæ•´ç®€ä»‹åŠåœ¨ä¸­æ–‡ä¸­çš„åº”ç”¨')]),n._v(" "),t("p",[n._v('ES2011-ES5\nç›¸ä¿¡å¤§å®¶å·²ç»å¯¹ ES5 éƒ½äº†ç„¶äºèƒ¸ï¼Œå› æ­¤åªåšç®€å•ç½—åˆ—ï¼Œå°±ä¸ä¸¾ä¾‹è¯´æ˜äº†\n\'USE STRICT\'\nJS çš„æ—©æœŸç‰ˆæœ¬å…è®¸ä½¿ç”¨æœªå£°æ˜çš„å˜é‡ã€‚ ä½†æ˜¯å½“ä½¿ç”¨ es5 "use strict"åŠŸèƒ½æ—¶ï¼Œä¼šæŠ¥å‘Šé”™è¯¯\n// index.js\n"use strict";')]),n._v(" "),t("p",[n._v("// æŠ¥é”™:a is not defined\na = 22;\nå¤åˆ¶ä»£ç \nArray\nArray.isArray\nArray.forEach\nArray.map\nArray.filter\nArray.reduce\nArray.reduceRight\nArray.every\nArray.some\nArray.indexOf\nArray.lastIndexOf\nJSON\nJSON.parse\nJSON.stringify\nDATE\nDate.now()\nDate.now().valueOf()\nObject.defineProperty()")]),n._v(" "),t("p",[n._v("å‚è€ƒæ–‡æ¡£")]),n._v(" "),t("p",[n._v("ECMAScript 6 Features\nes6-features.org\nES2021 Features with simple examples\n4 ä¸ªå¼ºå¤§ JavaScript è¿ç®—ç¬¦\nES6 æ ¸å¿ƒç‰¹æ€§")])])}),[],!1,null,null,null);e.default=r.exports}}]);