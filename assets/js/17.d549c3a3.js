(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{383:function(t,s,a){"use strict";a.r(s);var n=a(40),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_2021-06-问题记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2021-06-问题记录"}},[t._v("#")]),t._v(" 2021-06 问题记录")]),t._v(" "),a("p",[a("strong",[t._v("2021/6/2 周三")])]),t._v(" "),a("h2",{attrs:{id:"一、nuxt-添加-eslint-和-prettier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、nuxt-添加-eslint-和-prettier"}},[t._v("#")]),t._v(" 一、nuxt 添加 eslint 和 prettier")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/web/tool/eslint-prettier-nuxt.html"}},[t._v("nuxt 添加 eslint 和 prettier")])],1),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/3 周四")])]),t._v(" "),a("h2",{attrs:{id:"二、eslint-prettier-基于-husky-来格式化代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、eslint-prettier-基于-husky-来格式化代码"}},[t._v("#")]),t._v(" 二、ESLint + Prettier 基于 husky 来格式化代码")]),t._v(" "),a("h3",{attrs:{id:"_1-安装依赖-husky"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装依赖-husky"}},[t._v("#")]),t._v(" 1.安装依赖 husky")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx husky-init "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm")]),t._v("\nnpx husky-init "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Yarn 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dlx husky-init --yarn2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Yarn 2")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i lint-staged -D "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对 git 提交的代码使用 linter")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("code",[t._v("husky-init")]),t._v(" 是一个一次性命令，可以快速初始化项目的 husky 配置。会修改 "),a("code",[t._v("package.json")]),t._v("，增加一个 "),a("code",[t._v("scrpits")]),t._v("："),a("code",[t._v('"prepare": "husky install"')]),t._v(" ，并且创建一个 "),a("code",[t._v("pre-commit")]),t._v(" 的示例（提交 commit 的时候执行 "),a("code",[t._v("npm test")]),t._v("）。每次 "),a("code",[t._v("npm install")]),t._v(" 之后都会执行 "),a("code",[t._v("prepare")]),t._v(" 来激活 git hook。\n"),a("a",{attrs:{href:"https://typicode.github.io/husky/#/",target:"_blank",rel:"noopener noreferrer"}},[t._v("husky"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("lint-staged")]),t._v(" 可以减少每次 lint 的操作范围，减少操作，把影响降低。因为我们有可能是项目途中才引入的 prettier，对一些早已经编写完成的代码进行格式化，可能会造成冲突或者一些不可预知的问题，降低项目稳定性。因此仅对本次提交的代码进行格式化，确保不会影响到其它未测试的代码。")]),t._v(" "),a("h3",{attrs:{id:"_2-修改配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改配置"}},[t._v("#")]),t._v(" 2.修改配置")]),t._v(" "),a("ul",[a("li",[t._v("编辑 "),a("code",[t._v("pacakge.json")]),t._v("，添加 scripts "),a("code",[t._v('"pre-commit-lint": "lint-staged"')])]),t._v(" "),a("li",[t._v("编辑 "),a("code",[t._v(".husky/pre-commit")]),t._v("，添加 "),a("code",[t._v("npm run pre-commit-lint")])]),t._v(" "),a("li",[t._v("添加 "),a("code",[t._v("lint-staged")]),t._v(" 配置")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .lintstagedrc.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.{js,jsx,ts,tsx}'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prettier --write'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eslint --fix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{!(package)*.json,*.code-snippets}'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prettier --write--parser json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'package.json'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prettier --write'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.vue'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prettier --write'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eslint --fix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.{scss,less,styl,css,html}'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prettier --write'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.md'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prettier --write'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://github.com/typicode/husky/issues/949",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_3-eslint-和-prettier-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-eslint-和-prettier-区别"}},[t._v("#")]),t._v(" 3.eslint 和 prettier 区别")]),t._v(" "),a("ul",[a("li",[t._v("eslint（包括其他一些 lint 工具）的主要功能包含代码格式的校验，代码质量的校验。")]),t._v(" "),a("li",[t._v("prettier 只是代码格式的校验（并格式化代码），不会对代码质量进行校验。")])]),t._v(" "),a("p",[t._v("代码格式问题通常指的是：单行代码长度、tab长度、空格、逗号表达式等问题。而代码质量问题指的是：未使用变量、三等号、全局变量声明等问题")]),t._v(" "),a("h3",{attrs:{id:"_4-eslint-和-prettier-配合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-eslint-和-prettier-配合"}},[t._v("#")]),t._v(" 4.eslint 和 prettier 配合")]),t._v(" "),a("p",[t._v("一般还是先使用 prettier 格式化再使用 eslint 校验。避免格式化后提交的代码在下一次或者别人 checkout 代码后通不过 eslint 校验的情况，以及一些可能存在的格式问题。\n"),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/68026905",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_5-ci-环境的时候跳过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-ci-环境的时候跳过"}},[t._v("#")]),t._v(" 5.CI 环境的时候跳过")]),t._v(" "),a("ul",[a("li",[t._v("在 CI 设置一个环境变量，然后跳过执行")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .husky/pre-commit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CI")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("使用第三方包 "),a("code",[t._v("is-ci")]),t._v("：")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" is-ci --save-dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("修改 "),a("code",[t._v("package.json")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prepare"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"is-ci || husky install"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"三、babel-jest-不支持-babel7-的解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、babel-jest-不支持-babel7-的解决方案"}},[t._v("#")]),t._v(" 三、babel-jest 不支持 babel7 的解决方案")]),t._v(" "),a("p",[t._v("jest 本身不支持 es6 语法，需要使用 babel-jest 插件进行转换。")]),t._v(" "),a("p",[t._v("babel-jest 需要依赖 "),a("code",[t._v("babel-core")]),t._v("。 babel7 好像不支持(babel-jest@24.1.0)。可以使用 "),a("code",[t._v("babel-core@^7.0.0-bridge.0")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i babel-core@^7.0.0-bridge.0 -D\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("blockquote",[a("p",[t._v("可以认为 babel-core@^7.0.0-bridge.0 插件是将 babel6 衔接到 babel7 的一个桥梁")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/7 周一")])]),t._v(" "),a("h2",{attrs:{id:"四、nuxt-配置-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、nuxt-配置-https"}},[t._v("#")]),t._v(" 四、nuxt 配置 https")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/zhangtian_tian/article/details/105238160",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端使用Nuxt框架，配置本地https访问"),a("OutboundLink")],1)]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/8 周二")])]),t._v(" "),a("h2",{attrs:{id:"五、nginx-配置-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、nginx-配置-https"}},[t._v("#")]),t._v(" 五、nginx 配置 https")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/luxiaoyao/p/10034009.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows下用nginx配置https服务器"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://blog.csdn.net/daily886/article/details/79268644",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows下Nginx配置SSL实现Https访问（包含证书生成）"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"http://slproweb.com/products/Win32OpenSSL.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenSSL 下载"),a("OutboundLink")],1)]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/10 周四")])]),t._v(" "),a("h2",{attrs:{id:"六、git-修改旧提交的时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、git-修改旧提交的时间"}},[t._v("#")]),t._v(" 六、git 修改旧提交的时间")]),t._v(" "),a("ul",[a("li",[t._v("修改上一个记录的时间")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit --amend --date"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-06-10T06:06:06Z"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日期是 ISO-8601")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("修改之前的记录的时间\n"),a("a",{attrs:{href:"https://www.cnblogs.com/zl1991/p/13152933.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),a("OutboundLink")],1)])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/11 周五")])]),t._v(" "),a("h2",{attrs:{id:"七、js-插入-meta-标签和-script-标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、js-插入-meta-标签和-script-标签"}},[t._v("#")]),t._v(" 七、js 插入 meta 标签和 script 标签")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入 meta 标签")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" oMeta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'meta'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noMeta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0, user-scalable=0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noMeta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'viewport'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByTagName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'head'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oMeta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入 script 标签")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nscript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByTagName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'head'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h2",{attrs:{id:"八、webstorm-设置换行符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、webstorm-设置换行符"}},[t._v("#")]),t._v(" 八、WebStorm 设置换行符")]),t._v(" "),a("p",[t._v("不同操作系统使用的换行符是不一样的。")]),t._v(" "),a("ul",[a("li",[t._v("Dos 和 windows 采用回车+换行 CR/LF 表示下一行")]),t._v(" "),a("li",[t._v("UNIX/Linux 采用换行符 LF 表示下一行")]),t._v(" "),a("li",[t._v("MAC OS 则采用回车符 CR 表示下一行")])]),t._v(" "),a("p",[t._v("git 文件回退，拉取代码都会修改这些换行符。结合 eslint 就会出现满屏报错，就需要设置 WebStorm 的默认换行符。\n"),a("img",{attrs:{src:"/img/daily/2021-06-11_newline-1.png",alt:"eslint 报错"}})]),t._v(" "),a("p",[t._v("WebStorm 配置\n"),a("img",{attrs:{src:"/img/daily/2021-06-11_newline-2.png",alt:"WebStorm 配置"}})]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/18 周五")])]),t._v(" "),a("h2",{attrs:{id:"九、vue-自定义指令重新绑定事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#九、vue-自定义指令重新绑定事件"}},[t._v("#")]),t._v(" 九、Vue 自定义指令重新绑定事件")]),t._v(" "),a("p",[t._v("用 "),a("code",[t._v("directive")]),t._v(" 的方式实现权限控制，控制 button 的时候，需要在执行 button 的点击事件之前进行验证。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("clickHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-permission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("native button"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("r-btn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("clickHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-permission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("component button"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("r-btn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("在 "),a("code",[t._v("directive")]),t._v(" 的 "),a("code",[t._v("vnode")]),t._v(" （乘机会看下 "),a("a",{attrs:{href:"https://github.com/vuejs/vue/blob/dev/src/core/vdom/vnode.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("vnode"),a("OutboundLink")],1),t._v("）参数可以获取到原始绑定的事件，但是原生标签和 vue 组件获取和重新绑定的方式不一样。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取原始事件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" eventHook "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("componentInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" originalEventHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 包裹事件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("permissionWrapperEventHook")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 验证权限")]),t._v("\n  originalEventHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("originalEventHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" eventWrapper "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("permissionWrapperEventHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重新绑定事件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$off")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eventWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" originalEventHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_wrapper "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" originalEventHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eventWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("eventHook"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eventWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("h4",{attrs:{id:"vm-off-移除组件自定义事件监听器。-vm-off"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vm-off-移除组件自定义事件监听器。-vm-off"}},[t._v("#")]),t._v(" "),a("code",[t._v("vm.$off")]),t._v(" 移除组件自定义事件监听器。 "),a("a",{attrs:{href:"https://cn.vuejs.org/v2/api/#vm-off",target:"_blank",rel:"noopener noreferrer"}},[t._v("vm.$off"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("如果没有提供参数，则移除所有的事件监听器；")]),t._v(" "),a("li",[t._v("如果只提供了事件，则移除该事件所有的监听器；")]),t._v(" "),a("li",[t._v("如果同时提供了事件与回调，则只移除这个回调的监听器。")])]),t._v(" "),a("h4",{attrs:{id:"removeeventlistener-移除原生标签上的事件。参考-remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#removeeventlistener-移除原生标签上的事件。参考-remove"}},[t._v("#")]),t._v(" removeEventListener 移除原生标签上的事件。参考 "),a("a",{attrs:{href:"https://github.com/vuejs/vue/blob/0603ff695d2f41286239298210113cbe2b209e28/src/platforms/web/runtime/modules/events.js#L92",target:"_blank",rel:"noopener noreferrer"}},[t._v("remove"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("vue 绑定事件的时候也包裹了一下事件。 "),a("a",{attrs:{href:"https://github.com/vuejs/vue/issues/6566",target:"_blank",rel:"noopener noreferrer"}},[t._v("6566"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"十、pdfvuer-无法加载-pdf-worker-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十、pdfvuer-无法加载-pdf-worker-js"}},[t._v("#")]),t._v(" 十、pdfvuer 无法加载 pdf.worker.js")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("锁定版本 "),a("code",[t._v("pdfvuer@1.7.5")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/fc8f62abea1a",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-cli2.0使用pdf.js出现无法加载pdf.worker.js的问题"),a("OutboundLink")],1)])])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("2021/6/22 周二")])]),t._v(" "),a("h2",{attrs:{id:"十一、transform-导致字体模糊"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十一、transform-导致字体模糊"}},[t._v("#")]),t._v(" 十一、transform 导致字体模糊")]),t._v(" "),a("p",[t._v("先记录，还没有仔细研究")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/Umbrella_Um/article/details/110139720",target:"_blank",rel:"noopener noreferrer"}},[t._v("css transform导致字体像素模糊的问题解决办法（多种方法，亲测有效）"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/20326220/blurry-text-on-transformrotate-in-chrome",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blurry text on transform:rotate in Chrome"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);