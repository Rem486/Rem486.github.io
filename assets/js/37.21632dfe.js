(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{388:function(s,n,a){"use strict";a.r(n);var e=a(40),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"nginx-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-常用命令"}},[s._v("#")]),s._v(" nginx - 常用命令")]),s._v(" "),a("h2",{attrs:{id:"启动和关闭"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动和关闭"}},[s._v("#")]),s._v(" 启动和关闭")]),s._v(" "),a("ul",[a("li",[s._v("利用配置文件启动 nginx： "),a("code",[s._v("nginx -c /usr/local/nginx/conf/nginx.conf")])]),s._v(" "),a("li",[s._v("重启服务："),a("code",[s._v("service nginx restart")])]),s._v(" "),a("li",[s._v("快速停止或关闭 nginx："),a("code",[s._v("nginx -s stop")])]),s._v(" "),a("li",[s._v("正常停止或关闭 nginx："),a("code",[s._v("nginx -s quit")])]),s._v(" "),a("li",[s._v("配置文件修改重装载命令："),a("code",[s._v("nginx -s reload")])])]),s._v(" "),a("h2",{attrs:{id:"查找和删除-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找和删除-nginx"}},[s._v("#")]),s._v(" 查找和删除 nginx")]),s._v(" "),a("ul",[a("li",[s._v("查看 nginx 的运行情况 "),a("code",[s._v("ps -ef | grep nginx")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef |grep nginx")]),s._v("\nroot       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3163")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2643")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":08 tty1     00:00:00 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("man")]),s._v(" nginx\nroot       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5427")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":50 ?        00:00:00 nginx: master process nginx\nnginx      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5428")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5427")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":50 ?        00:00:00 nginx: worker process\nroot       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5532")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2746")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":52 pts/0    00:00:00 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("whereis nginx")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# whereis nginx")]),s._v("\nnginx: /usr/sbin/nginx /usr/lib64/nginx /etc/nginx /usr/share/nginx /usr/share/man/man8/nginx.8.gz /usr/share/man/man3/nginx.3pm.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("find / -name nginx")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find / -name nginx")]),s._v("\n/usr/lib64/perl5/vendor_perl/auto/nginx\n/usr/lib64/nginx\n/usr/share/nginx\n/usr/sbin/nginx\n/etc/logrotate.d/nginx\n/etc/nginx\n/var/lib/nginx\n/var/log/nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("依次删除find查找到的所有目录："),a("code",[s._v("rm -rf /usr/sbin/nginx")])])]),s._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("修改转发请求大小限制")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#web端接口\nlocation /api/ {\n  # 转发\n  proxy_pass http://www.example.com/api/;  \n  # 文件大小\n  client_max_body_size 100m;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("修改请求 host，需要携带请求域名的时候（做了负载均衡）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#web端接口\nlocation /api/ {\n  # 转发\n  proxy_pass http://www.example.com/api/;  \n  # 修改 host 为网站域名\n  proxy_set_header Host $host;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("url 修改规则")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 第一步,把所有的 mysite.com/api/interface  转换成:   mysite.com/interface\nlocation /api {\n  rewrite    ^(.*)\\/api(.*)$    $1$2;\n}\n\n# 第二步，　把所有的 mysite.com/interface 的请求，转发到 www.example.com/interface\nlocation /interface {\n  proxy_pass   http://www.example.com;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);